<!DOCTYPE html>

<html lang="zh-CN" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="3. 配置 Python" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/using/configure.html" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="构建要求: 编译 CPython 所需要的特性和最低版本: C11 编译器。 可选的 C11 特性 不是必须的。, 在 Windows 上，需要 Microsoft Visual Studio 2017 或更新版本。, 对 IEEE 754 浮点数和 浮点 Not-a-Number (NaN) 的支持。, 对线程的支持。, 对于 ssl 和 hashlib 扩展模块 OpenSSL 1.1...." />
<meta property="og:image" content="https://docs.python.org/3/_static/og-image.png" />
<meta property="og:image:alt" content="Python documentation" />
<meta name="description" content="构建要求: 编译 CPython 所需要的特性和最低版本: C11 编译器。 可选的 C11 特性 不是必须的。, 在 Windows 上，需要 Microsoft Visual Studio 2017 或更新版本。, 对 IEEE 754 浮点数和 浮点 Not-a-Number (NaN) 的支持。, 对线程的支持。, 对于 ssl 和 hashlib 扩展模块 OpenSSL 1.1...." />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta name="theme-color" content="#3776ab" />

    <title>3. 配置 Python &#8212; Python 3.14.0a4 文档</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?v=08c2cdb3" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../_static/pygments_dark.css?v=5349f25f" />
    
    <script src="../_static/documentation_options.js?v=495aad30"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="在 Python 3.14.0a4 文档 中搜索"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="关于此文档" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="copyright" title="版权所有" href="../copyright.html" />
    <link rel="next" title="4. 在Windows上使用 Python" href="windows.html" />
    <link rel="prev" title="2. 在类Unix环境下使用Python" href="unix.html" />
    
      <script defer data-domain="docs.python.org" src="https://plausible.io/js/script.js"></script>
    
    <link rel="canonical" href="https://docs.python.org/3/using/configure.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="stylesheet" href="../_static/pydoctheme_dark.css" media="(prefers-color-scheme: dark)" id="pydoctheme_dark_css">
    <link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script>
            <script type="text/javascript" src="../_static/search-focus.js"></script>
            <script type="text/javascript" src="../_static/themetoggle.js"></script> 
            <script type="text/javascript" src="../_static/rtd_switcher.js"></script>
            <meta name="readthedocs-addons-api-version" content="1">

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <nav class="nav-content" role="navigation">
        <label for="menuToggler" class="toggler__label">
            <span></span>
        </label>
        <span class="nav-items-wrapper">
            <a href="https://www.python.org/" class="nav-logo">
                <img src="../_static/py.svg" alt="Python logo"/>
            </a>
            <span class="version_switcher_placeholder"></span>
            <form role="search" class="search" action="../search.html" method="get">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                    <path fill-rule="nonzero" fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
                <input placeholder="快速搜索" aria-label="快速搜索" type="search" name="q" />
                <input type="submit" value="提交"/>
            </form>
        </span>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
            
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label>
  <div>
    <h3><a href="../contents.html">目录</a></h3>
    <ul>
<li><a class="reference internal" href="#">3. 配置 Python</a><ul>
<li><a class="reference internal" href="#build-requirements">3.1. 构建要求</a></li>
<li><a class="reference internal" href="#generated-files">3.2. 已生成的文件</a><ul>
<li><a class="reference internal" href="#configure-script">3.2.1. 配置脚本</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configure-options">3.3. 配置选项</a><ul>
<li><a class="reference internal" href="#general-options">3.3.1. 通用选项</a></li>
<li><a class="reference internal" href="#c-compiler-options">3.3.2. C 编译器选项</a></li>
<li><a class="reference internal" href="#linker-options">3.3.3. 链接器选项</a></li>
<li><a class="reference internal" href="#options-for-third-party-dependencies">3.3.4. 用于第三方依赖的选项</a></li>
<li><a class="reference internal" href="#webassembly-options">3.3.5. WebAssembly 选项。</a></li>
<li><a class="reference internal" href="#install-options">3.3.6. 安装时的选项</a></li>
<li><a class="reference internal" href="#performance-options">3.3.7. 性能选项</a></li>
<li><a class="reference internal" href="#python-debug-build">3.3.8. Python 调试级编译</a></li>
<li><a class="reference internal" href="#debug-options">3.3.9. 调试选项</a></li>
<li><a class="reference internal" href="#id2">3.3.10. 链接器选项</a></li>
<li><a class="reference internal" href="#libraries-options">3.3.11. 库选项</a></li>
<li><a class="reference internal" href="#security-options">3.3.12. 安全性选项</a></li>
<li><a class="reference internal" href="#macos-options">3.3.13. macOS 选项</a></li>
<li><a class="reference internal" href="#ios-options">3.3.14. iOS 选项</a></li>
<li><a class="reference internal" href="#cross-compiling-options">3.3.15. 交叉编译选项</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-build-system">3.4. Python 构建系统</a><ul>
<li><a class="reference internal" href="#main-files-of-the-build-system">3.4.1. 构建系统的主要文件</a></li>
<li><a class="reference internal" href="#main-build-steps">3.4.2. 主要构建步骤</a></li>
<li><a class="reference internal" href="#main-makefile-targets">3.4.3. 主要 Makefile 目标</a><ul>
<li><a class="reference internal" href="#make">3.4.3.1. make</a></li>
<li><a class="reference internal" href="#make-platform">3.4.3.2. make platform</a></li>
<li><a class="reference internal" href="#make-profile-opt">3.4.3.3. make profile-opt</a></li>
<li><a class="reference internal" href="#make-clean">3.4.3.4. make clean</a></li>
<li><a class="reference internal" href="#make-distclean">3.4.3.5. make distclean</a></li>
<li><a class="reference internal" href="#make-install">3.4.3.6. make install</a></li>
<li><a class="reference internal" href="#make-test">3.4.3.7. make test</a></li>
<li><a class="reference internal" href="#make-ci">3.4.3.8. make ci</a></li>
<li><a class="reference internal" href="#make-buildbottest">3.4.3.9. make buildbottest</a></li>
<li><a class="reference internal" href="#make-regen-all">3.4.3.10. make regen-all</a></li>
</ul>
</li>
<li><a class="reference internal" href="#c-extensions">3.4.4. C 扩展</a></li>
</ul>
</li>
<li><a class="reference internal" href="#compiler-and-linker-flags">3.5. 编译器和链接器的标志</a><ul>
<li><a class="reference internal" href="#preprocessor-flags">3.5.1. 预处理器的标志</a></li>
<li><a class="reference internal" href="#compiler-flags">3.5.2. 编译器标志</a></li>
<li><a class="reference internal" href="#linker-flags">3.5.3. 链接器标志位</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>上一主题</h4>
    <p class="topless"><a href="unix.html"
                          title="上一章"><span class="section-number">2. </span>在类Unix环境下使用Python</a></p>
  </div>
  <div>
    <h4>下一主题</h4>
    <p class="topless"><a href="windows.html"
                          title="下一章"><span class="section-number">4. </span>在Windows上使用 Python</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>当前页</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">报告 Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/using/configure.rst"
            rel="nofollow">显示源码
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="Related">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="windows.html" title="4. 在Windows上使用 Python"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="unix.html" title="2. 在类Unix环境下使用Python"
             accesskey="P">上一页</a> |</li>

          <li><img src="../_static/py.svg" alt="Python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.14.0a4 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Python安装和使用</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3. </span>配置 Python</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="快速搜索" aria-label="快速搜索" type="search" name="q" id="search-box" />
          <input type="submit" value="提交" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="configure-python">
<h1><span class="section-number">3. </span>配置 Python<a class="headerlink" href="#configure-python" title="Link to this heading">¶</a></h1>
<section id="build-requirements">
<h2><span class="section-number">3.1. </span>构建要求<a class="headerlink" href="#build-requirements" title="Link to this heading">¶</a></h2>
<p>编译 CPython 所需要的特性和最低版本:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.cppreference.com/w/c/11">C11</a> 编译器。 <a class="reference external" href="https://en.wikipedia.org/wiki/C11_(C_standard_revision)#Optional_features">可选的 C11 特性</a> 不是必须的。</p></li>
<li><p>在 Windows 上，需要 Microsoft Visual Studio 2017 或更新版本。</p></li>
<li><p>对 <a class="reference external" href="https://en.wikipedia.org/wiki/IEEE_754">IEEE 754</a> 浮点数和 <a class="reference external" href="https://en.wikipedia.org/wiki/NaN#Floating_point">浮点 Not-a-Number (NaN)</a> 的支持。</p></li>
<li><p>对线程的支持。</p></li>
<li><p>对于 <a class="reference internal" href="../library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code></a> 和 <a class="reference internal" href="../library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a> 扩展模块 OpenSSL 1.1.1 为最低版本而 OpenSSL 3.0.9 为推荐的最低版本。</p></li>
<li><p>SQLite 3.15.2 用于 <a class="reference internal" href="../library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> 扩展模块。</p></li>
<li><p>Tcl/Tk 8.5.12 用于 <a class="reference internal" href="../library/tkinter.html#module-tkinter" title="tkinter: Interface to Tcl/Tk for graphical user interfaces"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tkinter</span></code></a> 模块。</p></li>
<li><p>Autoconf 2.72 and aclocal 1.16.5 are required to regenerate the
<code class="file docutils literal notranslate"><span class="pre">configure</span></code> script.</p></li>
</ul>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.1 版本发生变更: </span>现在需要 Tcl/Tk 8.3.1 版本。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.5 版本发生变更: </span>在 Windows 上，现在需要 Visual Studio 2015 或更新的版本。 现在需要 Tcl/Tk 8.4 版本。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版本发生变更: </span>现在要求选定的 C99 特性，如 <code class="docutils literal notranslate"><span class="pre">&lt;stdint.h&gt;</span></code> 和 <code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">inline</span></code> 函数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.7 版本发生变更: </span>现在要求线程支持和 OpenSSL 1.0.2。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.10 版本发生变更: </span>现在需要 OpenSSL 1.1.1。 需要 SQLite 3.7.15。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.11 版本发生变更: </span>C11 编译器，现在需要 IEEE 754 和 NaN 支持。 在 Windows 上，需要 Visual Studio 2017 或更新的版本。 现在需要 Tcl/Tk version 8.5.12 用于 <a class="reference internal" href="../library/tkinter.html#module-tkinter" title="tkinter: Interface to Tcl/Tk for graphical user interfaces"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tkinter</span></code></a> 模块。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.13 版本发生变更: </span>现在需要 autoconf 2.71, aclocal 1.16.5 和 SQLite 3.15.2。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.14 版本发生变更: </span>Autoconf 2.72 is now required.</p>
</div>
<p>另请参阅 <span class="target" id="index-64"></span><a class="pep reference external" href="https://peps.python.org/pep-0007/"><strong>PEP 7</strong></a> &quot;Style Guide for C Code&quot; 和 <span class="target" id="index-65"></span><a class="pep reference external" href="https://peps.python.org/pep-0011/"><strong>PEP 11</strong></a> &quot;CPython platform support&quot;。</p>
</section>
<section id="generated-files">
<h2><span class="section-number">3.2. </span>已生成的文件<a class="headerlink" href="#generated-files" title="Link to this heading">¶</a></h2>
<p>为了减少构建依赖性，Python 源代码包含多个已生成的文件。 重新生成所有已生成文件的命令如下:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>regen-all
make<span class="w"> </span>regen-stdlib-module-names
make<span class="w"> </span>regen-limited-abi
make<span class="w"> </span>regen-configure
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Makefile.pre.in</span></code> 文件记录了已生成的文件、它们的输入以及用于重新生成它们的工具。 搜索 <code class="docutils literal notranslate"><span class="pre">regen-*</span></code> make target。</p>
<section id="configure-script">
<h3><span class="section-number">3.2.1. </span>配置脚本<a class="headerlink" href="#configure-script" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">regen-configure</span></code> 命令将使用 <code class="docutils literal notranslate"><span class="pre">Tools/build/regen-configure.sh</span></code> shell 脚本生成 <code class="docutils literal notranslate"><span class="pre">aclocal.m4</span></code> 文件和 <code class="docutils literal notranslate"><span class="pre">configure</span></code> 脚本，它通过使用一个 Ubuntu 容器来获取同样的工具版本并具有可复现的输出。</p>
<p>容器是可选的，以下命令可以在本地运行:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>autoreconf<span class="w"> </span>-ivf<span class="w"> </span>-Werror
</pre></div>
</div>
<p>生成的文件可根据实际的 <code class="docutils literal notranslate"><span class="pre">autoconf-archive</span></code>, <code class="docutils literal notranslate"><span class="pre">aclocal</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code> 版本进行改变。</p>
</section>
</section>
<section id="configure-options">
<span id="id1"></span><h2><span class="section-number">3.3. </span>配置选项<a class="headerlink" href="#configure-options" title="Link to this heading">¶</a></h2>
<p>用以下方式列出所有 <code class="file docutils literal notranslate"><span class="pre">configure</span></code> 脚本选项:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>./configure<span class="w"> </span>--help
</pre></div>
</div>
<p>参阅 Python 源代码中的 <code class="file docutils literal notranslate"><span class="pre">Misc/SpecialBuilds.txt</span></code> 。</p>
<section id="general-options">
<h3><span class="section-number">3.3.1. </span>通用选项<a class="headerlink" href="#general-options" title="Link to this heading">¶</a></h3>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-enable-loadable-sqlite-extensions">
<span class="sig-name descname"><span class="pre">--enable-loadable-sqlite-extensions</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-enable-loadable-sqlite-extensions" title="Link to this definition">¶</a></dt>
<dd><p>在 <a class="reference internal" href="../library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> 模块的 <code class="xref py py-mod docutils literal notranslate"><span class="pre">_sqlite</span></code> 扩展模块中是否支持可加载扩展（默认为否）。</p>
<p>参见 <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.enable_load_extension" title="sqlite3.Connection.enable_load_extension"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sqlite3.Connection.enable_load_extension()</span></code></a> 方法的 <a class="reference internal" href="../library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> 模块。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.6.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-disable-ipv6">
<span class="sig-name descname"><span class="pre">--disable-ipv6</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-disable-ipv6" title="Link to this definition">¶</a></dt>
<dd><p>禁用 IPv6 支持（若开启支持则默认启用），见 <a class="reference internal" href="../library/socket.html#module-socket" title="socket: Low-level networking interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code></a> 模块。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-enable-big-digits">
<span class="sig-name descname"><span class="pre">--enable-big-digits</span></span><span class="sig-prename descclassname"><span class="pre">=[15|30]</span></span><a class="headerlink" href="#cmdoption-enable-big-digits" title="Link to this definition">¶</a></dt>
<dd><p>定义 Python <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> 数字的比特大小：15或30比特</p>
<p>在默认情况下，数位大小为 30。</p>
<p>定义 <code class="docutils literal notranslate"><span class="pre">PYLONG_BITS_IN_DIGIT</span></code> 为 <code class="docutils literal notranslate"><span class="pre">15</span></code> 或 <code class="docutils literal notranslate"><span class="pre">30</span></code>。</p>
<p>参见  <a class="reference internal" href="../library/sys.html#sys.int_info" title="sys.int_info"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.int_info.bits_per_digit</span></code></a> 。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-suffix">
<span class="sig-name descname"><span class="pre">--with-suffix</span></span><span class="sig-prename descclassname"><span class="pre">=SUFFIX</span></span><a class="headerlink" href="#cmdoption-with-suffix" title="Link to this definition">¶</a></dt>
<dd><p>将 Python 的可执行文件后缀设置为 <em>SUFFIX</em>。</p>
<p>在 Windows 和 macOS 上默认后缀为 <code class="docutils literal notranslate"><span class="pre">.exe</span></code> (可执行文件为 <code class="docutils literal notranslate"><span class="pre">python.exe</span></code>)，在 Emscripten 节点上为 <code class="docutils literal notranslate"><span class="pre">.js</span></code>，在 Emscripten 浏览器上为 <code class="docutils literal notranslate"><span class="pre">.html</span></code>，在 WASI 上为 <code class="docutils literal notranslate"><span class="pre">.wasm</span></code>，而在其他平台上为一个空字符串 (可执行文件为 <code class="docutils literal notranslate"><span class="pre">python</span></code>)。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.11 版本发生变更: </span>在 WASM 平台上默认后缀为 <code class="docutils literal notranslate"><span class="pre">.js</span></code>, <code class="docutils literal notranslate"><span class="pre">.html</span></code> 或 <code class="docutils literal notranslate"><span class="pre">.wasm</span></code> 之一。</p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-tzpath">
<span class="sig-name descname"><span class="pre">--with-tzpath</span></span><span class="sig-prename descclassname"><span class="pre">=&lt;list</span> <span class="pre">of</span> <span class="pre">absolute</span> <span class="pre">paths</span> <span class="pre">separated</span> <span class="pre">by</span> <span class="pre">pathsep&gt;</span></span><a class="headerlink" href="#cmdoption-with-tzpath" title="Link to this definition">¶</a></dt>
<dd><p>Select the default time zone search path for为 <a class="reference internal" href="../library/zoneinfo.html#zoneinfo.TZPATH" title="zoneinfo.TZPATH"><code class="xref py py-const docutils literal notranslate"><span class="pre">zoneinfo.TZPATH</span></code></a> 选择默认的时区搜索路径。 参见 <a class="reference internal" href="../library/zoneinfo.html#module-zoneinfo" title="zoneinfo: IANA time zone support"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zoneinfo</span></code></a> 模块的 <a class="reference internal" href="../library/zoneinfo.html#zoneinfo-data-compile-time-config"><span class="std std-ref">编译时配置</span></a>。</p>
<p>默认：<code class="docutils literal notranslate"><span class="pre">/usr/share/zoneinfo:/usr/lib/zoneinfo:/usr/share/lib/zoneinfo:/etc/zoneinfo</span></code></p>
<p>参阅 <a class="reference internal" href="../library/os.html#os.pathsep" title="os.pathsep"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.pathsep</span></code></a> 路径分隔符。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.9.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-without-decimal-contextvar">
<span class="sig-name descname"><span class="pre">--without-decimal-contextvar</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-without-decimal-contextvar" title="Link to this definition">¶</a></dt>
<dd><p>编译 <code class="docutils literal notranslate"><span class="pre">_decimal</span></code> 扩展模块时使用线程本地上下文，而不是协程本地上下文（默认），参见 <a class="reference internal" href="../library/decimal.html#module-decimal" title="decimal: Implementation of the General Decimal Arithmetic  Specification."><code class="xref py py-mod docutils literal notranslate"><span class="pre">decimal</span></code></a>  模块。</p>
<p>参见 <a class="reference internal" href="../library/decimal.html#decimal.HAVE_CONTEXTVAR" title="decimal.HAVE_CONTEXTVAR"><code class="xref py py-const docutils literal notranslate"><span class="pre">decimal.HAVE_CONTEXTVAR</span></code></a> 和 <a class="reference internal" href="../library/contextvars.html#module-contextvars" title="contextvars: Context Variables"><code class="xref py py-mod docutils literal notranslate"><span class="pre">contextvars</span></code></a> 模块。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.9.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-dbmliborder">
<span class="sig-name descname"><span class="pre">--with-dbmliborder</span></span><span class="sig-prename descclassname"><span class="pre">=&lt;list</span> <span class="pre">of</span> <span class="pre">backend</span> <span class="pre">names&gt;</span></span><a class="headerlink" href="#cmdoption-with-dbmliborder" title="Link to this definition">¶</a></dt>
<dd><p>覆盖 <a class="reference internal" href="../library/dbm.html#module-dbm" title="dbm: Interfaces to various Unix &quot;database&quot; formats."><code class="xref py py-mod docutils literal notranslate"><span class="pre">dbm</span></code></a> 模块的 db 后端检查顺序。</p>
<p>合法值是用冒号（<code class="docutils literal notranslate"><span class="pre">:</span></code>）分隔的字符串，包含后端名称。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ndbm</span></code> ；</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gdbm</span></code> ；</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bdb</span></code> 。</p></li>
</ul>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-without-c-locale-coercion">
<span class="sig-name descname"><span class="pre">--without-c-locale-coercion</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-without-c-locale-coercion" title="Link to this definition">¶</a></dt>
<dd><p>禁用 C 语言对 UTF-8 的强制要求（默认为启用）。</p>
<p>不定义 <code class="docutils literal notranslate"><span class="pre">PY_COERCE_C_LOCALE</span></code> 宏。</p>
<p>参阅  <span class="target" id="index-66"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONCOERCECLOCALE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONCOERCECLOCALE</span></code></a> 和 <span class="target" id="index-67"></span><a class="pep reference external" href="https://peps.python.org/pep-0538/"><strong>PEP 538</strong></a>。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-platlibdir">
<span class="sig-name descname"><span class="pre">--with-platlibdir</span></span><span class="sig-prename descclassname"><span class="pre">=DIRNAME</span></span><a class="headerlink" href="#cmdoption-with-platlibdir" title="Link to this definition">¶</a></dt>
<dd><p>Python 库目录名（默认为 <code class="docutils literal notranslate"><span class="pre">lib</span></code>）。</p>
<p>Fedora 和 SuSE 在64 位平台用 <code class="docutils literal notranslate"><span class="pre">lib64</span></code> 。</p>
<p>参阅  <a class="reference internal" href="../library/sys.html#sys.platlibdir" title="sys.platlibdir"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.platlibdir</span></code></a> 。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.9.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-wheel-pkg-dir">
<span class="sig-name descname"><span class="pre">--with-wheel-pkg-dir</span></span><span class="sig-prename descclassname"><span class="pre">=PATH</span></span><a class="headerlink" href="#cmdoption-with-wheel-pkg-dir" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="../library/ensurepip.html#module-ensurepip" title="ensurepip: Bootstrapping the &quot;pip&quot; installer into an existing Python installation or virtual environment."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ensurepip</span></code></a> 模块用到的 wheel  包目录（默认为无）。</p>
<p>某些 Linux 发行版的打包策略建议不要捆绑依赖关系。如 Fedora 在 <code class="docutils literal notranslate"><span class="pre">/usr/share/python-wheels/</span></code> 目录下安装 wheel 包，而不安装 <code class="xref py py-mod docutils literal notranslate"><span class="pre">ensurepip._bundled</span></code> 包。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.10.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-pkg-config">
<span class="sig-name descname"><span class="pre">--with-pkg-config</span></span><span class="sig-prename descclassname"><span class="pre">=[check|yes|no]</span></span><a class="headerlink" href="#cmdoption-with-pkg-config" title="Link to this definition">¶</a></dt>
<dd><p>配置是否应当使用 <strong class="program">pkg-config</strong> 来检测构建依赖。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">check</span></code> (默认值): <strong class="program">pkg-config</strong> 为可选项</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yes</span></code>: <strong class="program">pkg-config</strong> 为必选项。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">no</span></code>: 配置不使用 <strong class="program">pkg-config</strong> 即使其存在</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.11.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-enable-pystats">
<span class="sig-name descname"><span class="pre">--enable-pystats</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-enable-pystats" title="Link to this definition">¶</a></dt>
<dd><p>启用内部 Python 性能统计数据收集。</p>
<p>在默认情况下，将关闭统计数据收集。 使用 <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-X</span> <span class="pre">pystats</span></code> 命令或设置 <code class="docutils literal notranslate"><span class="pre">PYTHONSTATS=1</span></code> 环境变量在 Python 启动时启用统计数据收集。</p>
<p>在 Python 退出时，如果统计数据收集已启用且未清除则会转储统计数据。</p>
<p>效果如下：</p>
<ul class="simple">
<li><p>增加了 <a class="reference internal" href="cmdline.html#cmdoption-X"><code class="xref std std-option docutils literal notranslate"><span class="pre">-X</span> <span class="pre">pystats</span></code></a> 命令行选项。</p></li>
<li><p>增加了 <code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONSTATS</span></code> 环境变量。</p></li>
<li><p>定义 <code class="docutils literal notranslate"><span class="pre">Py_STATS</span></code> 宏。</p></li>
<li><p>为 <a class="reference internal" href="../library/sys.html#module-sys" title="sys: Access system-specific parameters and functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sys</span></code></a> 模块增加函数：</p>
<ul>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">sys._stats_on()</span></code>: 启用统计数据收集。</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">sys._stats_off()</span></code>: 关闭统计数据收集。</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">sys._stats_clear()</span></code>: 清除统计数据。</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">sys._stats_dump()</span></code>: 将统计数据转储到文件，并清除统计数据。</p></li>
</ul>
</li>
</ul>
<p>统计数据将被转储至 <code class="docutils literal notranslate"><span class="pre">/tmp/py_stats/</span></code> (Unix) 或 <code class="docutils literal notranslate"><span class="pre">C:\temp\py_stats\</span></code> (Windows) 中的任意（可能唯一）文件。 如果该目录不存在，结果将被打印到 stderr。</p>
<p>使用 <code class="docutils literal notranslate"><span class="pre">Tools/scripts/summarize_stats.py</span></code> 来读取统计数据。</p>
<p>统计数据：</p>
<ul class="simple">
<li><p>操作码：</p>
<ul>
<li><p>专门类别: success, failure, hit, deferred, miss, deopt, failures；</p></li>
<li><p>执行计数；</p></li>
<li><p>对应计数。</p></li>
</ul>
</li>
<li><p>调用：</p>
<ul>
<li><p>内联 Python 调用；</p></li>
<li><p>PyEval 调用；</p></li>
<li><p>推入的帧；</p></li>
<li><p>创建的帧对象；</p></li>
<li><p>Eval 调用: vector, generator, legacy, function VECTORCALL, build class, slot, function &quot;ex&quot;, API, method。</p></li>
</ul>
</li>
<li><p>对象：</p>
<ul>
<li><p>incref 和 decref；</p></li>
<li><p>解释器 incref 和 decref；</p></li>
<li><p>分配: all, 512 bytes, 4 kiB, big；</p></li>
<li><p>空闲；</p></li>
<li><p>去向/来自空闲列表；</p></li>
<li><p>实体化/非实体化的字典；</p></li>
<li><p>类型缓存；</p></li>
<li><p>优化尝试；</p></li>
<li><p>已创建/已执行的优化跟踪；</p></li>
<li><p>已执行的 uop。</p></li>
</ul>
</li>
<li><p>垃圾回收器：</p>
<ul>
<li><p>垃圾回收；</p></li>
<li><p>已访问的对象；</p></li>
<li><p>已收集的对象。</p></li>
</ul>
</li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.11.</span></p>
</div>
</dd></dl>

<dl class="std option" id="free-threading-build">
<dt class="sig sig-object std" id="cmdoption-disable-gil">
<span class="sig-name descname"><span class="pre">--disable-gil</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-disable-gil" title="Link to this definition">¶</a></dt>
<dd><p>启用对不带 <a class="reference internal" href="../glossary.html#term-global-interpreter-lock"><span class="xref std std-term">global interpreter lock</span></a> (GIL) 运行 Python 的 <strong>实验性</strong> 支持：自由线程构建版。</p>
<p>定义 <code class="docutils literal notranslate"><span class="pre">Py_GIL_DISABLED</span></code> 宏并向 <a class="reference internal" href="../library/sys.html#sys.abiflags" title="sys.abiflags"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.abiflags</span></code></a> 添加 <code class="docutils literal notranslate"><span class="pre">&quot;t&quot;</span></code>。</p>
<p>请参阅 <a class="reference internal" href="../whatsnew/3.13.html#whatsnew313-free-threaded-cpython"><span class="std std-ref">自由线程的 CPython</span></a> 了解详情。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.13.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-enable-experimental-jit">
<span class="sig-name descname"><span class="pre">--enable-experimental-jit</span></span><span class="sig-prename descclassname"><span class="pre">=[no|yes|yes-off|interpreter]</span></span><a class="headerlink" href="#cmdoption-enable-experimental-jit" title="Link to this definition">¶</a></dt>
<dd><p>指明如何集成 <a class="reference internal" href="../whatsnew/3.13.html#whatsnew313-jit-compiler"><span class="std std-ref">JIT 编译器</span></a>。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">no</span></code> - 构建不带 JIT 的解释器。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yes</span></code> - 构建带有 JIT 的解释器。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yes-off</span></code> - 构建带 JIT 的解释器但默认禁用它。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interpreter</span></code> - 构建不带 JIT 的解释器，但针对启用第 2 层级的解释器。</p></li>
</ul>
<p>根据惯例，<code class="docutils literal notranslate"><span class="pre">--enable-experimental-jit</span></code> 是 <code class="docutils literal notranslate"><span class="pre">--enable-experimental-jit=yes</span></code> 的简写形式。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>当构建启用的 JIT 的 CPython 时，请确保你的系统已安装了 Python 3.11 或更新的版本。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.13.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-PKG_CONFIG">
<span class="sig-name descname"><span class="pre">PKG_CONFIG</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-PKG_CONFIG" title="Link to this definition">¶</a></dt>
<dd><p>指向 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code> 工具的路径。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-PKG_CONFIG_LIBDIR">
<span class="sig-name descname"><span class="pre">PKG_CONFIG_LIBDIR</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-PKG_CONFIG_LIBDIR" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-PKG_CONFIG_PATH">
<span class="sig-name descname"><span class="pre">PKG_CONFIG_PATH</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-PKG_CONFIG_PATH" title="Link to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">pkg-config</span></code> 选项。</p>
</dd></dl>

</section>
<section id="c-compiler-options">
<h3><span class="section-number">3.3.2. </span>C 编译器选项<a class="headerlink" href="#c-compiler-options" title="Link to this heading">¶</a></h3>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-CC">
<span class="sig-name descname"><span class="pre">CC</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-CC" title="Link to this definition">¶</a></dt>
<dd><p>C 编译器指令。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-CFLAGS">
<span class="sig-name descname"><span class="pre">CFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-CFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>C 编译器标志。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-CPP">
<span class="sig-name descname"><span class="pre">CPP</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-CPP" title="Link to this definition">¶</a></dt>
<dd><p>C 预处理器命令。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-CPPFLAGS">
<span class="sig-name descname"><span class="pre">CPPFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-CPPFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>C 预处理器旗标，例如 <code class="samp docutils literal notranslate"><span class="pre">-I</span><em><span class="pre">include_dir</span></em></code>。</p>
</dd></dl>

</section>
<section id="linker-options">
<h3><span class="section-number">3.3.3. </span>链接器选项<a class="headerlink" href="#linker-options" title="Link to this heading">¶</a></h3>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LDFLAGS">
<span class="sig-name descname"><span class="pre">LDFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LDFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>链接器旗标，例如 <code class="samp docutils literal notranslate"><span class="pre">-L</span><em><span class="pre">library_directory</span></em></code>。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBS">
<span class="sig-name descname"><span class="pre">LIBS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBS" title="Link to this definition">¶</a></dt>
<dd><p>要传给链接器的库，例如 <code class="samp docutils literal notranslate"><span class="pre">-l</span><em><span class="pre">library</span></em></code>。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-MACHDEP">
<span class="sig-name descname"><span class="pre">MACHDEP</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-MACHDEP" title="Link to this definition">¶</a></dt>
<dd><p>依赖具体机器的库文件名称。</p>
</dd></dl>

</section>
<section id="options-for-third-party-dependencies">
<h3><span class="section-number">3.3.4. </span>用于第三方依赖的选项<a class="headerlink" href="#options-for-third-party-dependencies" title="Link to this heading">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.11.</span></p>
</div>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-BZIP2_CFLAGS">
<span class="sig-name descname"><span class="pre">BZIP2_CFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-BZIP2_CFLAGS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-BZIP2_LIBS">
<span class="sig-name descname"><span class="pre">BZIP2_LIBS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-BZIP2_LIBS" title="Link to this definition">¶</a></dt>
<dd><p>将 Python 链接到 <code class="docutils literal notranslate"><span class="pre">libbz2</span></code> 的 C 编译器和链接器旗标，由 <a class="reference internal" href="../library/bz2.html#module-bz2" title="bz2: Interfaces for bzip2 compression and decompression."><code class="xref py py-mod docutils literal notranslate"><span class="pre">bz2</span></code></a> 模块使用，覆盖 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-CURSES_CFLAGS">
<span class="sig-name descname"><span class="pre">CURSES_CFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-CURSES_CFLAGS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-CURSES_LIBS">
<span class="sig-name descname"><span class="pre">CURSES_LIBS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-CURSES_LIBS" title="Link to this definition">¶</a></dt>
<dd><p>针对 <code class="docutils literal notranslate"><span class="pre">libncurses</span></code> 或 <code class="docutils literal notranslate"><span class="pre">libncursesw</span></code> 的 C 编译器和链接器旗标，由 <a class="reference internal" href="../library/curses.html#module-curses" title="curses: An interface to the curses library, providing portable terminal handling. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">curses</span></code></a> 模块使用，覆盖 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-GDBM_CFLAGS">
<span class="sig-name descname"><span class="pre">GDBM_CFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-GDBM_CFLAGS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-GDBM_LIBS">
<span class="sig-name descname"><span class="pre">GDBM_LIBS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-GDBM_LIBS" title="Link to this definition">¶</a></dt>
<dd><p>针对 <code class="docutils literal notranslate"><span class="pre">gdbm</span></code> 的 C 编译器和链接器旗标。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBB2_CFLAGS">
<span class="sig-name descname"><span class="pre">LIBB2_CFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBB2_CFLAGS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBB2_LIBS">
<span class="sig-name descname"><span class="pre">LIBB2_LIBS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBB2_LIBS" title="Link to this definition">¶</a></dt>
<dd><p>针对 <code class="docutils literal notranslate"><span class="pre">libb2</span></code> (<a class="reference internal" href="../library/hashlib.html#hashlib-blake2"><span class="std std-ref">BLAKE2</span></a>) 的 C 编译器和链接器旗标，由 <a class="reference internal" href="../library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a> 模块使用，覆盖  <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBEDIT_CFLAGS">
<span class="sig-name descname"><span class="pre">LIBEDIT_CFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBEDIT_CFLAGS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBEDIT_LIBS">
<span class="sig-name descname"><span class="pre">LIBEDIT_LIBS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBEDIT_LIBS" title="Link to this definition">¶</a></dt>
<dd><p>针对 <code class="docutils literal notranslate"><span class="pre">libedit</span></code> 的 C 编译器和链接器旗标，由 <a class="reference internal" href="../library/readline.html#module-readline" title="readline: GNU readline support for Python. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> 模块使用，覆盖 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBFFI_CFLAGS">
<span class="sig-name descname"><span class="pre">LIBFFI_CFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBFFI_CFLAGS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBFFI_LIBS">
<span class="sig-name descname"><span class="pre">LIBFFI_LIBS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBFFI_LIBS" title="Link to this definition">¶</a></dt>
<dd><p>针对 <code class="docutils literal notranslate"><span class="pre">libffi</span></code> 的 C 编译器和链接器旗标，由 <a class="reference internal" href="../library/ctypes.html#module-ctypes" title="ctypes: A foreign function library for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ctypes</span></code></a> 模块使用，覆盖 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBMPDEC_CFLAGS">
<span class="sig-name descname"><span class="pre">LIBMPDEC_CFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBMPDEC_CFLAGS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBMPDEC_LIBS">
<span class="sig-name descname"><span class="pre">LIBMPDEC_LIBS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBMPDEC_LIBS" title="Link to this definition">¶</a></dt>
<dd><p>针对 <code class="docutils literal notranslate"><span class="pre">libmpdec</span></code> 的 C 编译器和链接器旗标，由 <a class="reference internal" href="../library/decimal.html#module-decimal" title="decimal: Implementation of the General Decimal Arithmetic  Specification."><code class="xref py py-mod docutils literal notranslate"><span class="pre">decimal</span></code></a> 模块使用，覆盖 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>除非指定了 <a class="reference internal" href="#cmdoption-with-system-libmpdec"><code class="xref std std-option docutils literal notranslate"><span class="pre">--with-system-libmpdec</span></code></a> 否则这些环境变量将没有效果。</p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBLZMA_CFLAGS">
<span class="sig-name descname"><span class="pre">LIBLZMA_CFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBLZMA_CFLAGS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBLZMA_LIBS">
<span class="sig-name descname"><span class="pre">LIBLZMA_LIBS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBLZMA_LIBS" title="Link to this definition">¶</a></dt>
<dd><p>针对 <code class="docutils literal notranslate"><span class="pre">liblzma</span></code> 的 C 编译器和链接器旗标，由 <a class="reference internal" href="../library/lzma.html#module-lzma" title="lzma: A Python wrapper for the liblzma compression library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">lzma</span></code></a> 模块使用，覆盖 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBREADLINE_CFLAGS">
<span class="sig-name descname"><span class="pre">LIBREADLINE_CFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBREADLINE_CFLAGS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBREADLINE_LIBS">
<span class="sig-name descname"><span class="pre">LIBREADLINE_LIBS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBREADLINE_LIBS" title="Link to this definition">¶</a></dt>
<dd><p>针对 <code class="docutils literal notranslate"><span class="pre">libreadline</span></code> 的 C 编译器和链接器旗标，由 <a class="reference internal" href="../library/readline.html#module-readline" title="readline: GNU readline support for Python. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> 模块使用，覆盖 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBSQLITE3_CFLAGS">
<span class="sig-name descname"><span class="pre">LIBSQLITE3_CFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBSQLITE3_CFLAGS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBSQLITE3_LIBS">
<span class="sig-name descname"><span class="pre">LIBSQLITE3_LIBS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBSQLITE3_LIBS" title="Link to this definition">¶</a></dt>
<dd><p>针对 <code class="docutils literal notranslate"><span class="pre">libsqlite3</span></code> 的 C 编译器和链接器旗标，由 <a class="reference internal" href="../library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> 模块使用，覆盖 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBUUID_CFLAGS">
<span class="sig-name descname"><span class="pre">LIBUUID_CFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBUUID_CFLAGS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-LIBUUID_LIBS">
<span class="sig-name descname"><span class="pre">LIBUUID_LIBS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-LIBUUID_LIBS" title="Link to this definition">¶</a></dt>
<dd><p>针对 <code class="docutils literal notranslate"><span class="pre">libuuid</span></code> 的 C 编译器和链接器旗标，由 <a class="reference internal" href="../library/uuid.html#module-uuid" title="uuid: UUID objects (universally unique identifiers) according to RFC 9562"><code class="xref py py-mod docutils literal notranslate"><span class="pre">uuid</span></code></a> 模块使用，覆盖 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-PANEL_CFLAGS">
<span class="sig-name descname"><span class="pre">PANEL_CFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-PANEL_CFLAGS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-PANEL_LIBS">
<span class="sig-name descname"><span class="pre">PANEL_LIBS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-PANEL_LIBS" title="Link to this definition">¶</a></dt>
<dd><p>针对 PANEL 的 C 编译器和链接器旗标，覆盖 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>。</p>
<p>针对 <code class="docutils literal notranslate"><span class="pre">libpanel</span></code> 或 <code class="docutils literal notranslate"><span class="pre">libpanelw</span></code> 的 C 编译器和链接器旗标，由 <a class="reference internal" href="../library/curses.panel.html#module-curses.panel" title="curses.panel: A panel stack extension that adds depth to  curses windows."><code class="xref py py-mod docutils literal notranslate"><span class="pre">curses.panel</span></code></a> 模块使用，覆盖 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-TCLTK_CFLAGS">
<span class="sig-name descname"><span class="pre">TCLTK_CFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-TCLTK_CFLAGS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-TCLTK_LIBS">
<span class="sig-name descname"><span class="pre">TCLTK_LIBS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-TCLTK_LIBS" title="Link to this definition">¶</a></dt>
<dd><p>针对 TCLTK 的 C 编译器和链接器旗标，覆盖 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-ZLIB_CFLAGS">
<span class="sig-name descname"><span class="pre">ZLIB_CFLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-ZLIB_CFLAGS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-ZLIB_LIBS">
<span class="sig-name descname"><span class="pre">ZLIB_LIBS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-ZLIB_LIBS" title="Link to this definition">¶</a></dt>
<dd><p>针对 <code class="docutils literal notranslate"><span class="pre">libzlib</span></code> 的 C 编译器和链接器旗标，由 <a class="reference internal" href="../library/gzip.html#module-gzip" title="gzip: Interfaces for gzip compression and decompression using file objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gzip</span></code></a> 模块使用，覆盖 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>。</p>
</dd></dl>

</section>
<section id="webassembly-options">
<h3><span class="section-number">3.3.5. </span>WebAssembly 选项。<a class="headerlink" href="#webassembly-options" title="Link to this heading">¶</a></h3>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-enable-wasm-dynamic-linking">
<span class="sig-name descname"><span class="pre">--enable-wasm-dynamic-linking</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-enable-wasm-dynamic-linking" title="Link to this definition">¶</a></dt>
<dd><p>为 WASM 启用动态链接支持。</p>
<p>动态链接启用 <code class="docutils literal notranslate"><span class="pre">dlopen</span></code>。 可执行文件的大小将由于限制死代码清理和附加特性而增加。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.11.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-enable-wasm-pthreads">
<span class="sig-name descname"><span class="pre">--enable-wasm-pthreads</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-enable-wasm-pthreads" title="Link to this definition">¶</a></dt>
<dd><p>为 WASM 启用 pthreads 支持。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.11.</span></p>
</div>
</dd></dl>

</section>
<section id="install-options">
<h3><span class="section-number">3.3.6. </span>安装时的选项<a class="headerlink" href="#install-options" title="Link to this heading">¶</a></h3>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-prefix">
<span class="sig-name descname"><span class="pre">--prefix</span></span><span class="sig-prename descclassname"><span class="pre">=PREFIX</span></span><a class="headerlink" href="#cmdoption-prefix" title="Link to this definition">¶</a></dt>
<dd><p>在 PREFIX 中安装架构无关的文件。 在 Unix 上，它默认为 <code class="file docutils literal notranslate"><span class="pre">/usr/local</span></code>。</p>
<p>该值可在运行时使用 <a class="reference internal" href="../library/sys.html#sys.prefix" title="sys.prefix"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.prefix</span></code></a> 获取。</p>
<p>作为示例，用户可以使用 <code class="docutils literal notranslate"><span class="pre">--prefix=&quot;$HOME/.local/&quot;</span></code> 在其家目录中安装 Python。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-exec-prefix">
<span class="sig-name descname"><span class="pre">--exec-prefix</span></span><span class="sig-prename descclassname"><span class="pre">=EPREFIX</span></span><a class="headerlink" href="#cmdoption-exec-prefix" title="Link to this definition">¶</a></dt>
<dd><p>在 EPREFIX 中安装架构无关的文件，默认为 <a class="reference internal" href="#cmdoption-prefix"><code class="xref std std-option docutils literal notranslate"><span class="pre">--prefix</span></code></a>。</p>
<p>该值可在运行时使用 <a class="reference internal" href="../library/sys.html#sys.exec_prefix" title="sys.exec_prefix"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.exec_prefix</span></code></a> 获取。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-disable-test-modules">
<span class="sig-name descname"><span class="pre">--disable-test-modules</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-disable-test-modules" title="Link to this definition">¶</a></dt>
<dd><p>不编译和安装 test 模块，如 <a class="reference internal" href="../library/test.html#module-test" title="test: Regression tests package containing the testing suite for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">test</span></code></a> 包或 <code class="xref py py-mod docutils literal notranslate"><span class="pre">_testcapi</span></code> 扩展模块（默认会编译并安装）。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.10.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-ensurepip">
<span class="sig-name descname"><span class="pre">--with-ensurepip</span></span><span class="sig-prename descclassname"><span class="pre">=[upgrade|install|no]</span></span><a class="headerlink" href="#cmdoption-with-ensurepip" title="Link to this definition">¶</a></dt>
<dd><p>选择 Python 安装时运行的 <a class="reference internal" href="../library/ensurepip.html#module-ensurepip" title="ensurepip: Bootstrapping the &quot;pip&quot; installer into an existing Python installation or virtual environment."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ensurepip</span></code></a> 命令。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">upgrade</span></code> （默认）：运行 <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">ensurepip</span> <span class="pre">--altinstall</span> <span class="pre">--upgrade</span></code> 命令。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">install</span></code> ：运行 <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">ensurepip</span> <span class="pre">--altinstall</span></code> 命令。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">no</span></code> ：不运行 ensurepip。</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.6.</span></p>
</div>
</dd></dl>

</section>
<section id="performance-options">
<h3><span class="section-number">3.3.7. </span>性能选项<a class="headerlink" href="#performance-options" title="Link to this heading">¶</a></h3>
<p>为获得最佳性能推荐使用 <code class="docutils literal notranslate"><span class="pre">--enable-optimizations</span> <span class="pre">--with-lto</span></code> (PGO + LTO) 来配置 Python。 试验性的 <code class="docutils literal notranslate"><span class="pre">--enable-bolt</span></code> 旗标也可被用来提升性能。</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-enable-optimizations">
<span class="sig-name descname"><span class="pre">--enable-optimizations</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-enable-optimizations" title="Link to this definition">¶</a></dt>
<dd><p>用 <span class="target" id="index-68"></span><a class="reference internal" href="#envvar-PROFILE_TASK"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PROFILE_TASK</span></code></a> 启用以配置文件主导的优化（PGO）（默认为禁用）。</p>
<p>C 编译器 Clang 需要用到 <code class="docutils literal notranslate"><span class="pre">llvm-profdata</span></code> 程序进行 PGO。在 macOS 上，GCC 也需要用到它：在 macOS 上 GCC 只是 Clang 的别名而已。</p>
<p>如果使用 <code class="docutils literal notranslate"><span class="pre">--enable-shared</span></code> 和 GCC ，还可以禁用 libpython 中的语义插值：在编译器和链接器的标志中加入 <code class="docutils literal notranslate"><span class="pre">-fno-semantic-interposition</span></code> 。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>在构建期间，你可能会遇到编译器警告提示某些源文件的配置数据不可用。 这些警告是无害的，因为在获取配置数据时只有一部分代码会被使用。 要在 Clang 上禁用这些警告，可通过在 <span class="target" id="index-69"></span><a class="reference internal" href="#envvar-CFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CFLAGS</span></code></a> 中添加 <code class="docutils literal notranslate"><span class="pre">-Wno-profile-instr-unprofiled</span></code> 来手动抑制它们。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.6.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.10 版本发生变更: </span>在 GCC 上使用 <code class="docutils literal notranslate"><span class="pre">-fno-semantic-interposition</span></code> 。</p>
</div>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PROFILE_TASK">
<span class="sig-name descname"><span class="pre">PROFILE_TASK</span></span><a class="headerlink" href="#envvar-PROFILE_TASK" title="Link to this definition">¶</a></dt>
<dd><p>Makefile 用到的环境变量：PGO 用到的 Python 命令行参数。</p>
<p>默认为：<code class="docutils literal notranslate"><span class="pre">-m</span> <span class="pre">test</span> <span class="pre">--pgo</span> <span class="pre">--timeout=$(TESTTIMEOUT)</span></code> 。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.8.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.13 版本发生变更: </span>任务失败将不会再被静默地忽略。</p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-lto">
<span class="sig-name descname"><span class="pre">--with-lto</span></span><span class="sig-prename descclassname"><span class="pre">=[full|thin|no|yes]</span></span><a class="headerlink" href="#cmdoption-with-lto" title="Link to this definition">¶</a></dt>
<dd><p>在编译过程中启用链接时间优化（LTO）（默认为禁用）。</p>
<p>LTO 时 C 编译器 Clang 需要用到 <code class="docutils literal notranslate"><span class="pre">llvm-ar</span></code> 参数（在 macOS 则为 <code class="docutils literal notranslate"><span class="pre">ar</span></code>），以及支持 LTO 的链接器（<code class="docutils literal notranslate"><span class="pre">ld.gold</span></code> 或 <code class="docutils literal notranslate"><span class="pre">lld</span></code>）。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.6.</span></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.11: </span>要使用 ThinLTO 特性，请在 Clang 上使用 <code class="docutils literal notranslate"><span class="pre">--with-lto=thin</span></code>。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.12 版本发生变更: </span>如果编译器支持将使用 ThinLTO 旗标作为 Clang 上的默认优化策略。</p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-enable-bolt">
<span class="sig-name descname"><span class="pre">--enable-bolt</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-enable-bolt" title="Link to this definition">¶</a></dt>
<dd><p>允许启用 <a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/bolt">BOLT 链接后二进制优化器</a> (默认为禁用)。</p>
<p>BOLT 是 LLVM 项目的一部分但并不总是包括在其二进制分发包中。 该旗标要求 <code class="docutils literal notranslate"><span class="pre">llvm-bolt</span></code> 和 <code class="docutils literal notranslate"><span class="pre">merge-fdata</span></code> 可用。</p>
<p>BOLT 仍然是一个相当新的项目因此目前该旗标应当被视为是试验性的。 因为此工具是作用于机器码所以其成功依赖于构建环境 + 其他优化配置参数 + CPU 架构的组合，并且并非所有组合都受到支持。 已知 LLVM 16 之前的 BOLT 版本在某些场景下会使得 BOLT 发生崩溃。 强烈建议使用 LLVM 16 或更新版本进行 BOLT 优化。</p>
<p><code class="xref std std-envvar docutils literal notranslate"><span class="pre">BOLT_INSTRUMENT_FLAGS</span></code> 和 <code class="xref std std-envvar docutils literal notranslate"><span class="pre">BOLT_APPLY_FLAGS</span></code> <strong class="program">configure</strong> 变量可被定义为覆盖 <strong class="program">llvm-bolt</strong> 的默认参数集合来分别指示和将 BOLT 数据应用于二进制代码中。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.12.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-BOLT_APPLY_FLAGS">
<span class="sig-name descname"><span class="pre">BOLT_APPLY_FLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-BOLT_APPLY_FLAGS" title="Link to this definition">¶</a></dt>
<dd><p>当创建 <a class="reference external" href="https://github.com/facebookarchive/BOLT">BOLT 优化的二进制文件</a> 时传给 <code class="docutils literal notranslate"><span class="pre">llvm-bolt</span></code> 的参数。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.12.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-BOLT_INSTRUMENT_FLAGS">
<span class="sig-name descname"><span class="pre">BOLT_INSTRUMENT_FLAGS</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-BOLT_INSTRUMENT_FLAGS" title="Link to this definition">¶</a></dt>
<dd><p>当构建二进制文件时传给 <code class="docutils literal notranslate"><span class="pre">llvm-bolt</span></code> 的参数。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.12.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-computed-gotos">
<span class="sig-name descname"><span class="pre">--with-computed-gotos</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-with-computed-gotos" title="Link to this definition">¶</a></dt>
<dd><p>在求值环节启用 goto 计数（在支持的编译器上默认启用）。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-without-mimalloc">
<span class="sig-name descname"><span class="pre">--without-mimalloc</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-without-mimalloc" title="Link to this definition">¶</a></dt>
<dd><p>禁用快速的 <a class="reference internal" href="../c-api/memory.html#mimalloc"><span class="std std-ref">mimalloc</span></a> 分配器（默认为启用）。</p>
<p>参见环境变量 <span class="target" id="index-70"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONMALLOC"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONMALLOC</span></code></a> 。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-without-pymalloc">
<span class="sig-name descname"><span class="pre">--without-pymalloc</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-without-pymalloc" title="Link to this definition">¶</a></dt>
<dd><p>禁用特定的 Python 内存分配器 <a class="reference internal" href="../c-api/memory.html#pymalloc"><span class="std std-ref">pymalloc</span></a> （默认为启用）。</p>
<p>参见环境变量 <span class="target" id="index-71"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONMALLOC"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONMALLOC</span></code></a> 。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-without-doc-strings">
<span class="sig-name descname"><span class="pre">--without-doc-strings</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-without-doc-strings" title="Link to this definition">¶</a></dt>
<dd><p>禁用静态文档字符串以减少内存占用（默认启用）。Python 中定义的文档字符串不受影响。</p>
<p>不定义 <code class="docutils literal notranslate"><span class="pre">PY_COERCE_C_LOCALE</span></code> 宏。</p>
<p>参阅宏 <code class="docutils literal notranslate"><span class="pre">PyDoc_STRVAR()</span></code> 。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-enable-profiling">
<span class="sig-name descname"><span class="pre">--enable-profiling</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-enable-profiling" title="Link to this definition">¶</a></dt>
<dd><p>用 <code class="docutils literal notranslate"><span class="pre">gprof</span></code> 启用 C 语言级的代码评估（默认为禁用）。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-strict-overflow">
<span class="sig-name descname"><span class="pre">--with-strict-overflow</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-with-strict-overflow" title="Link to this definition">¶</a></dt>
<dd><p>将 <code class="docutils literal notranslate"><span class="pre">-fstrict-overflow</span></code> 添加到 C 编译器旗标 (在默认情况下我们将添加 <code class="docutils literal notranslate"><span class="pre">-fno-strict-overflow</span></code> 来代替)。</p>
</dd></dl>

</section>
<section id="python-debug-build">
<span id="debug-build"></span><h3><span class="section-number">3.3.8. </span>Python 调试级编译<a class="headerlink" href="#python-debug-build" title="Link to this heading">¶</a></h3>
<p>调试版本 Python 是指带有 <a class="reference internal" href="#cmdoption-with-pydebug"><code class="xref std std-option docutils literal notranslate"><span class="pre">--with-pydebug</span></code></a>  参数的编译。</p>
<p>调试版本的效果：</p>
<ul class="simple">
<li><p>默认显示所有警告：在 <a class="reference internal" href="../library/warnings.html#module-warnings" title="warnings: Issue warning messages and control their disposition."><code class="xref py py-mod docutils literal notranslate"><span class="pre">warnings</span></code></a> 模块中，默认警告过滤器的列表是空的。</p></li>
<li><p>在 <a class="reference internal" href="../library/sys.html#sys.abiflags" title="sys.abiflags"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.abiflags</span></code></a> 中加入 <code class="docutils literal notranslate"><span class="pre">d</span></code> 标记。</p></li>
<li><p>加入 <code class="xref py py-func docutils literal notranslate"><span class="pre">sys.gettotalrefcount()</span></code> 函数。</p></li>
<li><p>命令行参数加入 <a class="reference internal" href="cmdline.html#cmdoption-X"><code class="xref std std-option docutils literal notranslate"><span class="pre">-X</span> <span class="pre">showrefcount</span></code></a> 。</p></li>
<li><p>添加 <a class="reference internal" href="cmdline.html#cmdoption-d"><code class="xref std std-option docutils literal notranslate"><span class="pre">-d</span></code></a> 命令行选项和 <span class="target" id="index-72"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONDEBUG"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONDEBUG</span></code></a> 环境变量用于调试解析器。</p></li>
<li><p>添加对 <code class="docutils literal notranslate"><span class="pre">__lltrace__</span></code> 变量的支持：如果定义了该变量则会在字节码求值循环中启用低层级追踪。</p></li>
<li><p>安装 <a class="reference internal" href="../c-api/memory.html#default-memory-allocators"><span class="std std-ref">内存分配调试钩子</span></a> ，以便检测缓冲区溢出和其他内存错误。</p></li>
<li><p>定义宏 <code class="docutils literal notranslate"><span class="pre">Py_DEBUG</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Py_REF_DEBUG</span></code> 。</p></li>
<li><p>增加运行时检查：针对由 <code class="docutils literal notranslate"><span class="pre">#ifdef</span> <span class="pre">Py_DEBUG</span></code> 和 <code class="docutils literal notranslate"><span class="pre">#endif</span></code> 所包裹的代码。 启用 <code class="docutils literal notranslate"><span class="pre">assert(...)</span></code> 和 <code class="docutils literal notranslate"><span class="pre">_PyObject_ASSERT(...)</span></code> 断言：不设置 <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code> 宏（另请参阅 <a class="reference internal" href="#cmdoption-with-assertions"><code class="xref std std-option docutils literal notranslate"><span class="pre">--with-assertions</span></code></a> 配置选项）。 主要的运行时检查有:</p>
<ul>
<li><p>增加了对函数参数的合理性检查。</p></li>
<li><p>创建 Unicode 和 int 对象时，内存按某种模式进行了填充，用于检测是否使用了未初始化的对象。</p></li>
<li><p>确保有能力清除或替换当前异常的函数在调用时不会引发异常。</p></li>
<li><p>检查内存释放器函数是否不改变当前异常。</p></li>
<li><p>垃圾收集器（<a class="reference internal" href="../library/gc.html#gc.collect" title="gc.collect"><code class="xref py py-func docutils literal notranslate"><span class="pre">gc.collect()</span></code></a> 函数）对对象的一致性进行一些基本检查。</p></li>
<li><p>从较宽类型转换到较窄类型时，<code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_SAFE_DOWNCAST()</span></code> 宏会检查整数下溢和上溢的情况。</p></li>
</ul>
</li>
</ul>
<p>参见  <a class="reference internal" href="../library/devmode.html#devmode"><span class="std std-ref">Python 开发模式</span></a> 和配置参数 <a class="reference internal" href="#cmdoption-with-trace-refs"><code class="xref std std-option docutils literal notranslate"><span class="pre">--with-trace-refs</span></code></a> 。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.8 版本发生变更: </span>发布构建版和调试构建版现在是 ABI 兼容的：定义了 <code class="docutils literal notranslate"><span class="pre">Py_DEBUG</span></code> 宏不再意味着同时定义了 <code class="docutils literal notranslate"><span class="pre">Py_TRACE_REFS</span></code> 宏（参见 <a class="reference internal" href="#cmdoption-with-trace-refs"><code class="xref std std-option docutils literal notranslate"><span class="pre">--with-trace-refs</span></code></a> 选项）。</p>
</div>
</section>
<section id="debug-options">
<h3><span class="section-number">3.3.9. </span>调试选项<a class="headerlink" href="#debug-options" title="Link to this heading">¶</a></h3>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-pydebug">
<span class="sig-name descname"><span class="pre">--with-pydebug</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-with-pydebug" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#debug-build"><span class="std std-ref">在调试模式下编译 Python</span></a>: 定义宏 <code class="docutils literal notranslate"><span class="pre">Py_DEBUG</span></code> (默认为禁用)。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-trace-refs">
<span class="sig-name descname"><span class="pre">--with-trace-refs</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-with-trace-refs" title="Link to this definition">¶</a></dt>
<dd><p>为了调试而启用引用的跟踪（默认为禁用）。</p>
<p>效果如下：</p>
<ul class="simple">
<li><p>定义 <code class="docutils literal notranslate"><span class="pre">Py_TRACE_REFS</span></code> 宏。</p></li>
<li><p>加入 <a class="reference internal" href="../library/sys.html#sys.getobjects" title="sys.getobjects"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getobjects()</span></code></a> 函数。</p></li>
<li><p>环境变量加入 <span class="target" id="index-73"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONDUMPREFS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONDUMPREFS</span></code></a> 。</p></li>
</ul>
<p><span class="target" id="index-74"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONDUMPREFS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONDUMPREFS</span></code></a> 环境变量可被用来转储在 Python 退出时仍然存活的对象和引用计数。</p>
<p><a class="reference internal" href="../c-api/typeobj.html#static-types"><span class="std std-ref">静态分配的对象</span></a> 将不会被追踪。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.8.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.13 版本发生变更: </span>此构建版现在与发布构建版和 <a class="reference internal" href="#debug-build"><span class="std std-ref">调试构建版</span></a> 是 ABI 兼容的。</p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-assertions">
<span class="sig-name descname"><span class="pre">--with-assertions</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-with-assertions" title="Link to this definition">¶</a></dt>
<dd><p>编译时启用 C 断言：<code class="docutils literal notranslate"><span class="pre">assert(...);</span></code> 和 <code class="docutils literal notranslate"><span class="pre">_PyObject_ASSERT(...);</span></code> （默认不启用）。</p>
<p>如果设置此参数，则在 <span class="target" id="index-75"></span><a class="reference internal" href="#envvar-OPT"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">OPT</span></code></a> 编译器变量中不定义 <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code> 宏。</p>
<p>参阅 <a class="reference internal" href="#cmdoption-with-pydebug"><code class="xref std std-option docutils literal notranslate"><span class="pre">--with-pydebug</span></code></a> 选项（<a class="reference internal" href="#debug-build"><span class="std std-ref">调试编译模式</span></a>），它也可以启用断言。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.6.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-valgrind">
<span class="sig-name descname"><span class="pre">--with-valgrind</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-with-valgrind" title="Link to this definition">¶</a></dt>
<dd><p>启用 Valgrind （默认禁用）。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-dtrace">
<span class="sig-name descname"><span class="pre">--with-dtrace</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-with-dtrace" title="Link to this definition">¶</a></dt>
<dd><p>启用 DTrace（默认禁用）。</p>
<p>参阅 <a class="reference internal" href="../howto/instrumentation.html#instrumentation"><span class="std std-ref">用 DTrace 和 SystemTap 测试 CPython</span></a>。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.6.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-address-sanitizer">
<span class="sig-name descname"><span class="pre">--with-address-sanitizer</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-with-address-sanitizer" title="Link to this definition">¶</a></dt>
<dd><p>启用 AddressSanitizer 内存错误检测 <code class="docutils literal notranslate"><span class="pre">asan</span></code>，（默认为禁用）。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.6.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-memory-sanitizer">
<span class="sig-name descname"><span class="pre">--with-memory-sanitizer</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-with-memory-sanitizer" title="Link to this definition">¶</a></dt>
<dd><p>启用 MemorySanitizer 内存错误检测 <code class="docutils literal notranslate"><span class="pre">msan</span></code>，（默认为禁用）。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.6.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-undefined-behavior-sanitizer">
<span class="sig-name descname"><span class="pre">--with-undefined-behavior-sanitizer</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-with-undefined-behavior-sanitizer" title="Link to this definition">¶</a></dt>
<dd><p>启用 undefinedBehaviorSanitizer 未定义行为检测 <code class="docutils literal notranslate"><span class="pre">ubsan</span></code>，（默认为禁用）。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.6.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-thread-sanitizer">
<span class="sig-name descname"><span class="pre">--with-thread-sanitizer</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-with-thread-sanitizer" title="Link to this definition">¶</a></dt>
<dd><p>启用 ThreadSanitizer 数据竞争检测器，<code class="docutils literal notranslate"><span class="pre">tsan</span></code> (默认为否）。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.13.</span></p>
</div>
</dd></dl>

</section>
<section id="id2">
<h3><span class="section-number">3.3.10. </span>链接器选项<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-enable-shared">
<span class="sig-name descname"><span class="pre">--enable-shared</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-enable-shared" title="Link to this definition">¶</a></dt>
<dd><p>启用共享 Python 库 <code class="docutils literal notranslate"><span class="pre">libpython</span></code> 的编译（默认为禁用）。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-without-static-libpython">
<span class="sig-name descname"><span class="pre">--without-static-libpython</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-without-static-libpython" title="Link to this definition">¶</a></dt>
<dd><p>不编译 <code class="docutils literal notranslate"><span class="pre">libpythonMAJOR.MINOR.a</span></code>，也不安装 <code class="docutils literal notranslate"><span class="pre">python.o</span></code> (默认会编译并安装)。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.10.</span></p>
</div>
</dd></dl>

</section>
<section id="libraries-options">
<h3><span class="section-number">3.3.11. </span>库选项<a class="headerlink" href="#libraries-options" title="Link to this heading">¶</a></h3>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-libs">
<span class="sig-name descname"><span class="pre">--with-libs</span></span><span class="sig-prename descclassname"><span class="pre">='lib1</span> <span class="pre">...'</span></span><a class="headerlink" href="#cmdoption-with-libs" title="Link to this definition">¶</a></dt>
<dd><p>链接附加库（默认不会）。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-system-expat">
<span class="sig-name descname"><span class="pre">--with-system-expat</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-with-system-expat" title="Link to this definition">¶</a></dt>
<dd><p>用已安装的 <code class="docutils literal notranslate"><span class="pre">expat</span></code> 库编译 <code class="xref py py-mod docutils literal notranslate"><span class="pre">pyexpat</span></code> 模块（默认为否）。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-system-libmpdec">
<span class="sig-name descname"><span class="pre">--with-system-libmpdec</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-with-system-libmpdec" title="Link to this definition">¶</a></dt>
<dd><p>使用已安装的 <code class="docutils literal notranslate"><span class="pre">mpdecimal</span></code> 库来构建 <code class="docutils literal notranslate"><span class="pre">_decimal</span></code> 扩展模块，参见 <a class="reference internal" href="../library/decimal.html#module-decimal" title="decimal: Implementation of the General Decimal Arithmetic  Specification."><code class="xref py py-mod docutils literal notranslate"><span class="pre">decimal</span></code></a> 模块（默认为是）。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.3.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.13 版本发生变更: </span>默认为使用已安装的 <code class="docutils literal notranslate"><span class="pre">mpdecimal</span></code> 库。</p>
</div>
<div class="deprecated-removed">
<p><span class="versionmodified deprecated">Deprecated since version 3.13, will be removed in version 3.15: </span><code class="docutils literal notranslate"><span class="pre">mpdecimal</span></code> 库源代码的副本将不再随 Python 3.15 一起分发。</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#cmdoption-arg-LIBMPDEC_CFLAGS"><code class="xref std std-option docutils literal notranslate"><span class="pre">LIBMPDEC_CFLAGS</span></code></a> 和 <a class="reference internal" href="#cmdoption-arg-LIBMPDEC_LIBS"><code class="xref std std-option docutils literal notranslate"><span class="pre">LIBMPDEC_LIBS</span></code></a>。</p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-readline">
<span class="sig-name descname"><span class="pre">--with-readline</span></span><span class="sig-prename descclassname"><span class="pre">=readline|editline</span></span><a class="headerlink" href="#cmdoption-with-readline" title="Link to this definition">¶</a></dt>
<dd><p>为 <a class="reference internal" href="../library/readline.html#module-readline" title="readline: GNU readline support for Python. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> 模块指定一个后端库。</p>
<ul class="simple">
<li><p>readline: 使用 readline 作为后端。</p></li>
<li><p>editline: 使用 editline 作为后端。</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.10.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-without-readline">
<span class="sig-name descname"><span class="pre">--without-readline</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-without-readline" title="Link to this definition">¶</a></dt>
<dd><p>不编译 <a class="reference internal" href="../library/readline.html#module-readline" title="readline: GNU readline support for Python. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> 模块（默认会）。</p>
<p>不定义 <code class="docutils literal notranslate"><span class="pre">HAVE_LIBREADLINE</span></code> 宏。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.10.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-libm">
<span class="sig-name descname"><span class="pre">--with-libm</span></span><span class="sig-prename descclassname"><span class="pre">=STRING</span></span><a class="headerlink" href="#cmdoption-with-libm" title="Link to this definition">¶</a></dt>
<dd><p>将 <code class="docutils literal notranslate"><span class="pre">libm</span></code> 数学库覆盖为 <em>STRING</em> (默认情况视系统而定)。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-libc">
<span class="sig-name descname"><span class="pre">--with-libc</span></span><span class="sig-prename descclassname"><span class="pre">=STRING</span></span><a class="headerlink" href="#cmdoption-with-libc" title="Link to this definition">¶</a></dt>
<dd><p>将 <code class="docutils literal notranslate"><span class="pre">libc</span></code> C 库覆盖为 <em>STRING</em> (默认情况视系统而定)。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-openssl">
<span class="sig-name descname"><span class="pre">--with-openssl</span></span><span class="sig-prename descclassname"><span class="pre">=DIR</span></span><a class="headerlink" href="#cmdoption-with-openssl" title="Link to this definition">¶</a></dt>
<dd><p>OpenSSL 的根目录。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.7.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-openssl-rpath">
<span class="sig-name descname"><span class="pre">--with-openssl-rpath</span></span><span class="sig-prename descclassname"><span class="pre">=[no|auto|DIR]</span></span><a class="headerlink" href="#cmdoption-with-openssl-rpath" title="Link to this definition">¶</a></dt>
<dd><p>设置 OpenSSL 库的运行时库目录（rpath）。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">no</span></code> (默认): 不设置 rpath。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">auto</span></code>：根据  <a class="reference internal" href="#cmdoption-with-openssl"><code class="xref std std-option docutils literal notranslate"><span class="pre">--with-openssl</span></code></a>  和 <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code> 自动检测 rpath。</p></li>
<li><p><em>DIR</em> ：直接设置 rpath。</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.10.</span></p>
</div>
</dd></dl>

</section>
<section id="security-options">
<h3><span class="section-number">3.3.12. </span>安全性选项<a class="headerlink" href="#security-options" title="Link to this heading">¶</a></h3>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-hash-algorithm">
<span class="sig-name descname"><span class="pre">--with-hash-algorithm</span></span><span class="sig-prename descclassname"><span class="pre">=[fnv|siphash13|siphash24]</span></span><a class="headerlink" href="#cmdoption-with-hash-algorithm" title="Link to this definition">¶</a></dt>
<dd><p>选择 <code class="docutils literal notranslate"><span class="pre">Python/pyhash.c</span></code> 采用的哈希算法。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">siphash13</span></code> (默认值);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">siphash24</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fnv</span></code>.</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.4.</span></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.11: </span>增加了 <code class="docutils literal notranslate"><span class="pre">siphash13</span></code> 并且是新的默认值。</p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-builtin-hashlib-hashes">
<span class="sig-name descname"><span class="pre">--with-builtin-hashlib-hashes</span></span><span class="sig-prename descclassname"><span class="pre">=md5,sha1,sha256,sha512,sha3,blake2</span></span><a class="headerlink" href="#cmdoption-with-builtin-hashlib-hashes" title="Link to this definition">¶</a></dt>
<dd><p>内置哈希模块：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">md5</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sha1</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sha256</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sha512</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sha3</span></code> (带 shake)。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blake2</span></code>。</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.9.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-ssl-default-suites">
<span class="sig-name descname"><span class="pre">--with-ssl-default-suites</span></span><span class="sig-prename descclassname"><span class="pre">=[python|openssl|STRING]</span></span><a class="headerlink" href="#cmdoption-with-ssl-default-suites" title="Link to this definition">¶</a></dt>
<dd><p>覆盖 OpenSSL 默认的密码套件字符串。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">python</span></code> (默认值): 采用 Python 推荐选择。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">openssl</span></code>：保留 OpenSSL 默认值不动。</p></li>
<li><p><em>STRING</em> ：采用自定义字符串。</p></li>
</ul>
<p>参见 <a class="reference internal" href="../library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code></a>  模块。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.7.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.10 版本发生变更: </span>设置 <code class="docutils literal notranslate"><span class="pre">python</span></code> 和 <em>STRING</em> 也会把 TLS 1.2 设为最低版本的协议。</p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-disable-safety">
<span class="sig-name descname"><span class="pre">--disable-safety</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-disable-safety" title="Link to this definition">¶</a></dt>
<dd><p>Disable compiler options that are <a class="reference external" href="https://github.com/ossf/wg-best-practices-os-developers/blob/main/docs/Compiler-Hardening-Guides/Compiler-Options-Hardening-Guide-for-C-and-C++.md">recommended by OpenSSF</a> for security reasons with no performance overhead.
If this option is not enabled, CPython will be built based on safety compiler options with no slow down.
When this option is enabled, CPython will not be built with the compiler options listed below.</p>
<p>The following compiler options are disabled with <code class="xref std std-option docutils literal notranslate"><span class="pre">--disable-safety</span></code>:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ossf/wg-best-practices-os-developers/blob/main/docs/Compiler-Hardening-Guides/Compiler-Options-Hardening-Guide-for-C-and-C++.md#enable-run-time-checks-for-stack-based-buffer-overflows">-fstack-protector-strong</a>: Enable run-time checks for stack-based buffer overflows.</p></li>
<li><p><a class="reference external" href="https://github.com/ossf/wg-best-practices-os-developers/blob/main/docs/Compiler-Hardening-Guides/Compiler-Options-Hardening-Guide-for-C-and-C++.md#enable-warning-about-trampolines-that-require-executable-stacks">-Wtrampolines</a>: Enable warnings about trampolines that require executable stacks.</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.14.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-enable-slower-safety">
<span class="sig-name descname"><span class="pre">--enable-slower-safety</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-enable-slower-safety" title="Link to this definition">¶</a></dt>
<dd><p>Enable compiler options that are <a class="reference external" href="https://github.com/ossf/wg-best-practices-os-developers/blob/main/docs/Compiler-Hardening-Guides/Compiler-Options-Hardening-Guide-for-C-and-C++.md">recommended by OpenSSF</a> for security reasons which require overhead.
If this option is not enabled, CPython will not be built based on safety compiler options which performance impact.
When this option is enabled, CPython will be built with the compiler options listed below.</p>
<p>The following compiler options are enabled with <code class="xref std std-option docutils literal notranslate"><span class="pre">--enable-slower-safety</span></code>:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ossf/wg-best-practices-os-developers/blob/main/docs/Compiler-Hardening-Guides/Compiler-Options-Hardening-Guide-for-C-and-C++.md#fortify-sources-for-unsafe-libc-usage-and-buffer-overflows">-D_FORTIFY_SOURCE=3</a>: Fortify sources with compile- and run-time checks for unsafe libc usage and buffer overflows.</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.14.</span></p>
</div>
</dd></dl>

</section>
<section id="macos-options">
<h3><span class="section-number">3.3.13. </span>macOS 选项<a class="headerlink" href="#macos-options" title="Link to this heading">¶</a></h3>
<p>参见 <a class="extlink-source reference external" href="https://github.com/python/cpython/tree/main/Mac/README.rst">Mac/README.rst</a>。</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-enable-universalsdk">
<span class="sig-name descname"><span class="pre">--enable-universalsdk</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-enable-universalsdk" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-0">
<span class="sig-name descname"><span class="pre">--enable-universalsdk</span></span><span class="sig-prename descclassname"><span class="pre">=SDKDIR</span></span><a class="headerlink" href="#cmdoption-0" title="Link to this definition">¶</a></dt>
<dd><p>创建通用的二进制版本。<em>SDKDIR</em> 指定应采用的 macOS SDK （默认为否）。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-enable-framework">
<span class="sig-name descname"><span class="pre">--enable-framework</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-enable-framework" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-1">
<span class="sig-name descname"><span class="pre">--enable-framework</span></span><span class="sig-prename descclassname"><span class="pre">=INSTALLDIR</span></span><a class="headerlink" href="#cmdoption-1" title="Link to this definition">¶</a></dt>
<dd><p>创建 Python.framework ，而不是传统的 Unix 安装版。可选参数 <em>INSTALLDIR</em> 指定了安装路径（(默认为否）。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-universal-archs">
<span class="sig-name descname"><span class="pre">--with-universal-archs</span></span><span class="sig-prename descclassname"><span class="pre">=ARCH</span></span><a class="headerlink" href="#cmdoption-with-universal-archs" title="Link to this definition">¶</a></dt>
<dd><p>指定应创建何种通用二进制文件。该选项仅当设置了 <a class="reference internal" href="#cmdoption-enable-universalsdk"><code class="xref std std-option docutils literal notranslate"><span class="pre">--enable-universalsdk</span></code></a> 时才有效。</p>
<p>可选项：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">universal2</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">32-bit</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">64-bit</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3-way</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">intel</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">intel-32</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">intel-64</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all</span></code>。</p></li>
</ul>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-framework-name">
<span class="sig-name descname"><span class="pre">--with-framework-name</span></span><span class="sig-prename descclassname"><span class="pre">=FRAMEWORK</span></span><a class="headerlink" href="#cmdoption-with-framework-name" title="Link to this definition">¶</a></dt>
<dd><p>为 macOS 中的 python 框架指定名称，仅当设置了 <a class="reference internal" href="#cmdoption-enable-framework"><code class="xref std std-option docutils literal notranslate"><span class="pre">--enable-framework</span></code></a> 时有效（默认：<code class="docutils literal notranslate"><span class="pre">Python</span></code>）。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-app-store-compliance">
<span class="sig-name descname"><span class="pre">--with-app-store-compliance</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-with-app-store-compliance" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-2">
<span class="sig-name descname"><span class="pre">--with-app-store-compliance</span></span><span class="sig-prename descclassname"><span class="pre">=PATCH-FILE</span></span><a class="headerlink" href="#cmdoption-2" title="Link to this definition">¶</a></dt>
<dd><p>Python 标准库包含已知的当提交给 macOS 和 iOS 应用商店进行发布时会触发自动检查工具错误的字符串。 如果启用，该选项将应用已知可纠正应用商店合规性的补丁列表。 也可以指定自定义补丁文件。 在默认情况下将禁用此选项。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.13.</span></p>
</div>
</dd></dl>

</section>
<section id="ios-options">
<h3><span class="section-number">3.3.14. </span>iOS 选项<a class="headerlink" href="#ios-options" title="Link to this heading">¶</a></h3>
<p>参见 <a class="extlink-source reference external" href="https://github.com/python/cpython/tree/main/iOS/README.rst">iOS/README.rst</a>。</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-3">
<span class="sig-name descname"><span class="pre">--enable-framework</span></span><span class="sig-prename descclassname"><span class="pre">=INSTALLDIR</span></span><a class="headerlink" href="#cmdoption-3" title="Link to this definition">¶</a></dt>
<dd><p>创建一个 Python 框架。 不同于 macOS，指定安装路径的 <em>INSTALLDIR</em> 参数是强制性的。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-4">
<span class="sig-name descname"><span class="pre">--with-framework-name</span></span><span class="sig-prename descclassname"><span class="pre">=FRAMEWORK</span></span><a class="headerlink" href="#cmdoption-4" title="Link to this definition">¶</a></dt>
<dd><p>指定框架的名称 (默认名称: <code class="docutils literal notranslate"><span class="pre">Python</span></code>)。</p>
</dd></dl>

</section>
<section id="cross-compiling-options">
<h3><span class="section-number">3.3.15. </span>交叉编译选项<a class="headerlink" href="#cross-compiling-options" title="Link to this heading">¶</a></h3>
<p>交叉编译，或称交叉构建，可被用于为不同的 CPU 架构或平台构建 Python。 交叉编译需要一个针对构建平台的 Python 解释器。 构建的 Python 版本必须与交叉编译的主机 Python 版本相匹配。</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-build">
<span class="sig-name descname"><span class="pre">--build</span></span><span class="sig-prename descclassname"><span class="pre">=BUILD</span></span><a class="headerlink" href="#cmdoption-build" title="Link to this definition">¶</a></dt>
<dd><p>用于在 BUILD 上执行构建的配置，通常由 <strong class="program">config.guess</strong> 通过推测得到。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-host">
<span class="sig-name descname"><span class="pre">--host</span></span><span class="sig-prename descclassname"><span class="pre">=HOST</span></span><a class="headerlink" href="#cmdoption-host" title="Link to this definition">¶</a></dt>
<dd><p>交叉编译以构建在 HOST (目标平台) 上运行的程序</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-with-build-python">
<span class="sig-name descname"><span class="pre">--with-build-python</span></span><span class="sig-prename descclassname"><span class="pre">=path/to/python</span></span><a class="headerlink" href="#cmdoption-with-build-python" title="Link to this definition">¶</a></dt>
<dd><p>针对交叉编译构建 <code class="docutils literal notranslate"><span class="pre">python</span></code> 二进制文件的路径</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.11.</span></p>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-CONFIG_SITE">
<span class="sig-name descname"><span class="pre">CONFIG_SITE</span></span><span class="sig-prename descclassname"><span class="pre">=file</span></span><a class="headerlink" href="#cmdoption-arg-CONFIG_SITE" title="Link to this definition">¶</a></dt>
<dd><p>指向一个带有配置重载的的文件的环境变量。</p>
<p>示例 <em>config.site</em> 文件：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># config.site-aarch64</span>
<span class="na">ac_cv_buggy_getaddrinfo</span><span class="o">=</span><span class="s">no</span>
<span class="na">ac_cv_file__dev_ptmx</span><span class="o">=</span><span class="s">yes</span>
<span class="na">ac_cv_file__dev_ptc</span><span class="o">=</span><span class="s">no</span>
</pre></div>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-HOSTRUNNER">
<span class="sig-name descname"><span class="pre">HOSTRUNNER</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-arg-HOSTRUNNER" title="Link to this definition">¶</a></dt>
<dd><p>用于针对交叉编译主机平台的运行 CPython 的程序。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.11.</span></p>
</div>
</dd></dl>

<p>交叉编译示例:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">CONFIG_SITE</span><span class="o">=</span>config.site-aarch64<span class="w"> </span>../configure<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--build<span class="o">=</span>x86_64-pc-linux-gnu<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--host<span class="o">=</span>aarch64-unknown-linux-gnu<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--with-build-python<span class="o">=</span>../x86_64/python
</pre></div>
</div>
</section>
</section>
<section id="python-build-system">
<h2><span class="section-number">3.4. </span>Python 构建系统<a class="headerlink" href="#python-build-system" title="Link to this heading">¶</a></h2>
<section id="main-files-of-the-build-system">
<h3><span class="section-number">3.4.1. </span>构建系统的主要文件<a class="headerlink" href="#main-files-of-the-build-system" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">configure.ac</span></code> =&gt; <code class="file docutils literal notranslate"><span class="pre">configure</span></code>;</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">Makefile.pre.in</span></code> =&gt; <code class="file docutils literal notranslate"><span class="pre">Makefile</span></code> (由 <code class="file docutils literal notranslate"><span class="pre">configure</span></code> 创建);</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">pyconfig.h</span></code> (由 <code class="file docutils literal notranslate"><span class="pre">configure</span></code> 创建);</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">Modules/Setup</span></code>:  由Makefile 使用 <code class="file docutils literal notranslate"><span class="pre">Module/makesetup</span></code> shell 脚本构建的 C 扩展;</p></li>
</ul>
</section>
<section id="main-build-steps">
<h3><span class="section-number">3.4.2. </span>主要构建步骤<a class="headerlink" href="#main-build-steps" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>C文件（ <code class="docutils literal notranslate"><span class="pre">.c</span></code> ）是作为对象文件（ <code class="docutils literal notranslate"><span class="pre">.o</span></code> ）构建的。</p></li>
<li><p>一个静态库 <code class="docutils literal notranslate"><span class="pre">libpython</span></code> （ <code class="docutils literal notranslate"><span class="pre">.a</span></code> ）是由对象文件创建的。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python.o</span></code> 和静态库 <code class="docutils literal notranslate"><span class="pre">libpython</span></code> 被链接到最终程序 <code class="docutils literal notranslate"><span class="pre">python</span></code> 中。</p></li>
<li><p>C 扩展是由 Makefile 构建的 (参见 <code class="file docutils literal notranslate"><span class="pre">Modules/Setup</span></code>)。</p></li>
</ul>
</section>
<section id="main-makefile-targets">
<h3><span class="section-number">3.4.3. </span>主要 Makefile 目标<a class="headerlink" href="#main-makefile-targets" title="Link to this heading">¶</a></h3>
<section id="make">
<h4><span class="section-number">3.4.3.1. </span>make<a class="headerlink" href="#make" title="Link to this heading">¶</a></h4>
<p>对于大部分情况来说，当编译某段代码或从上游刷新你的签出内容之后重新构建时，你需要做的就是执行 <code class="docutils literal notranslate"><span class="pre">make</span></code>，它（按照 Make 的语义）将构建默认目标，即在 Makefile 中定义的第一个目标。 在传统上（包括在 CPython 项目中）这通常为 <code class="docutils literal notranslate"><span class="pre">all</span></code> 目标。 <code class="docutils literal notranslate"><span class="pre">configure</span></code> 脚本将扩展一个 <code class="docutils literal notranslate"><span class="pre">autoconf</span></code> 变量 <code class="docutils literal notranslate"><span class="pre">&#64;DEF_MAKE_ALL_RULE&#64;</span></code> 来准确地描述 <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">all</span></code> 将构建哪个目标。 有如下三个选择：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">profile-opt</span></code> (使用 <code class="docutils literal notranslate"><span class="pre">--enable-optimizations</span></code> 配置)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build_wasm</span></code> (chosen if the host platform matches <code class="docutils literal notranslate"><span class="pre">wasm32-wasi*</span></code> or
<code class="docutils literal notranslate"><span class="pre">wasm32-emscripten</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build_all</span></code> (不显式地使用任何其他配置)</p></li>
</ul>
<p>根据最近的源文件更改，Make 将重新构建任何尚未被更新的目标（对象文件和可执行文件），包括在必要时再次运行 <code class="docutils literal notranslate"><span class="pre">configure</span></code>。 不过源/目标的依赖项数量很多并且是手动维护的，因此 Make 有时并没有所需的全部信息来正确地检测所有需要重新构建的目标。 根据尚未被重新构建的目标的具体情况，你可能会遇到许多问题。 如果你有无法确定原理的构建或测试问题，<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clean</span> <span class="pre">&amp;&amp;</span> <span class="pre">make</span></code> 应该能够解决大多数依赖问题，代价则是会耗费更多的时间来构建。</p>
</section>
<section id="make-platform">
<h4><span class="section-number">3.4.3.2. </span>make platform<a class="headerlink" href="#make-platform" title="Link to this heading">¶</a></h4>
<p>构建 <code class="docutils literal notranslate"><span class="pre">python</span></code> 程序，但不构造标准库扩展模块。 这将生成一个名为 <code class="docutils literal notranslate"><span class="pre">platform</span></code> 的文件，其中只包含一行描述构建平台详细信息的文本，例如 <code class="docutils literal notranslate"><span class="pre">macosx-14.3-arm64-3.12</span></code> 或 <code class="docutils literal notranslate"><span class="pre">linux-x86_64-3.13</span></code>。</p>
</section>
<section id="make-profile-opt">
<h4><span class="section-number">3.4.3.3. </span>make profile-opt<a class="headerlink" href="#make-profile-opt" title="Link to this heading">¶</a></h4>
<p>使用 profile-guided optimization (PGO) 构建 Python。 你可以使用 <a class="reference internal" href="#cmdoption-enable-optimizations"><code class="xref std std-option docutils literal notranslate"><span class="pre">--enable-optimizations</span></code></a> 配置选项来使其成为 <code class="docutils literal notranslate"><span class="pre">make</span></code> 命令的默认目标（即对应 <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">all</span></code> 或更简洁的 <code class="docutils literal notranslate"><span class="pre">make</span></code> 命令）。</p>
</section>
<section id="make-clean">
<h4><span class="section-number">3.4.3.4. </span>make clean<a class="headerlink" href="#make-clean" title="Link to this heading">¶</a></h4>
<p>移除已构建文件。</p>
</section>
<section id="make-distclean">
<h4><span class="section-number">3.4.3.5. </span>make distclean<a class="headerlink" href="#make-distclean" title="Link to this heading">¶</a></h4>
<p>在 <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clean</span></code> 所做的工作之外，还移除由配置脚本所创建的文件。 再次构建之前将需要运行 <code class="docutils literal notranslate"><span class="pre">configure</span></code>。 <a class="footnote-reference brackets" href="#id5" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p>
</section>
<section id="make-install">
<h4><span class="section-number">3.4.3.6. </span>make install<a class="headerlink" href="#make-install" title="Link to this heading">¶</a></h4>
<p>构建 <code class="docutils literal notranslate"><span class="pre">all</span></code> 目标并安装 Python。</p>
</section>
<section id="make-test">
<h4><span class="section-number">3.4.3.7. </span>make test<a class="headerlink" href="#make-test" title="Link to this heading">¶</a></h4>
<p>Build the <code class="docutils literal notranslate"><span class="pre">all</span></code> target and run the Python test suite with the
<code class="docutils literal notranslate"><span class="pre">--fast-ci</span></code> option without GUI tests. Variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TESTOPTS</span></code>: 额外的回归测试命令行选项。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TESTPYTHONOPTS</span></code>: 额外的 Python 命令行选项。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TESTTIMEOUT</span></code>: 超时限制（默认值：10 分钟）。</p></li>
</ul>
</section>
<section id="make-ci">
<h4><span class="section-number">3.4.3.8. </span>make ci<a class="headerlink" href="#make-ci" title="Link to this heading">¶</a></h4>
<p>This is similar to <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code>, but uses the <code class="docutils literal notranslate"><span class="pre">-ugui</span></code> to also run GUI tests.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.14.</span></p>
</div>
</section>
<section id="make-buildbottest">
<h4><span class="section-number">3.4.3.9. </span>make buildbottest<a class="headerlink" href="#make-buildbottest" title="Link to this heading">¶</a></h4>
<p>这与 <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code> 类似，但会使用默认超时限制为 20 分钟的 <code class="docutils literal notranslate"><span class="pre">--slow-ci</span></code> 选项，而不是 <code class="docutils literal notranslate"><span class="pre">--fast-ci</span></code> 选项。</p>
</section>
<section id="make-regen-all">
<h4><span class="section-number">3.4.3.10. </span>make regen-all<a class="headerlink" href="#make-regen-all" title="Link to this heading">¶</a></h4>
<p>重新生成（几乎）所有的已生成文件。 这包括（但不限于）字节码用例，以及解析器生成器文件。 对于其余的 <a class="reference external" href="#generated-files">已生成文件</a> 必须分别运行 <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">regen-stdlib-module-names</span></code> 和 <code class="docutils literal notranslate"><span class="pre">autoconf</span></code>。</p>
</section>
</section>
<section id="c-extensions">
<h3><span class="section-number">3.4.4. </span>C 扩展<a class="headerlink" href="#c-extensions" title="Link to this heading">¶</a></h3>
<p>有些 C 扩展是作为内置模块构建的，比如 <code class="docutils literal notranslate"><span class="pre">sys</span></code> 模块。 它们在定义了 <code class="docutils literal notranslate"><span class="pre">Py_BUILD_CORE_BUILTIN</span></code> 宏的情况下构建。 内置模块没有 <code class="docutils literal notranslate"><span class="pre">__file__</span></code> 属性：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span>
<span class="go">&lt;module &#39;sys&#39; (built-in)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="vm">__file__</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">AttributeError</span>: <span class="n">module &#39;sys&#39; has no attribute &#39;__file__&#39;</span>
</pre></div>
</div>
<p>其他 C 扩展是作为动态库来构建的，比如 <code class="docutils literal notranslate"><span class="pre">_asyncio</span></code> 模块。 它们在定义了 <code class="docutils literal notranslate"><span class="pre">Py_BUILD_CORE_MODULE</span></code> 宏的情况下构建。 在 Linux x86-64 上的例子：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">_asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_asyncio</span>
<span class="go">&lt;module &#39;_asyncio&#39; from &#39;/usr/lib64/python3.9/lib-dynload/_asyncio.cpython-39-x86_64-linux-gnu.so&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_asyncio</span><span class="o">.</span><span class="vm">__file__</span>
<span class="go">&#39;/usr/lib64/python3.9/lib-dynload/_asyncio.cpython-39-x86_64-linux-gnu.so&#39;</span>
</pre></div>
</div>
<p><code class="file docutils literal notranslate"><span class="pre">Modules/Setup</span></code> 用于生成 Makefile 目标，以构建 C 扩展。在文件的开头， C 被构建为内置模块。在标记 <code class="docutils literal notranslate"><span class="pre">*shared*</span></code> 之后定义的扩展被构建为动态库。</p>
<p>宏 <code class="xref c c-macro docutils literal notranslate"><span class="pre">PyAPI_FUNC()</span></code>, <code class="xref c c-macro docutils literal notranslate"><span class="pre">PyAPI_DATA()</span></code> 和 <a class="reference internal" href="../c-api/intro.html#c.PyMODINIT_FUNC" title="PyMODINIT_FUNC"><code class="xref c c-macro docutils literal notranslate"><span class="pre">PyMODINIT_FUNC</span></code></a> 在 <code class="file docutils literal notranslate"><span class="pre">Include/exports.h</span></code> 中的定义将因是否定义了 <code class="docutils literal notranslate"><span class="pre">Py_BUILD_CORE_MODULE</span></code> 宏而不同:</p>
<ul class="simple">
<li><p>如果 <code class="docutils literal notranslate"><span class="pre">Py_BUILD_CORE_MODULE</span></code> 定义了，使用 <code class="docutils literal notranslate"><span class="pre">Py_EXPORTED_SYMBOL</span></code> 。</p></li>
<li><p>否则使用 <code class="docutils literal notranslate"><span class="pre">Py_IMPORTED_SYMBOL</span></code> 。</p></li>
</ul>
<p>如果宏 <code class="docutils literal notranslate"><span class="pre">Py_BUILD_CORE_BUILTIN</span></code> 被错误地用在作为共享库构建的 C 扩展上，它的 <code class="samp docutils literal notranslate"><span class="pre">PyInit_</span><em><span class="pre">xxx</span></em><span class="pre">()</span></code> 函数就不会被导出，导致导入时出现 <a class="reference internal" href="../library/exceptions.html#ImportError" title="ImportError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportError</span></code></a> 。</p>
</section>
</section>
<section id="compiler-and-linker-flags">
<h2><span class="section-number">3.5. </span>编译器和链接器的标志<a class="headerlink" href="#compiler-and-linker-flags" title="Link to this heading">¶</a></h2>
<p>脚本 <code class="docutils literal notranslate"><span class="pre">./configure</span></code> 和环境变量设置的选项，并被 <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> 使用。</p>
<section id="preprocessor-flags">
<h3><span class="section-number">3.5.1. </span>预处理器的标志<a class="headerlink" href="#preprocessor-flags" title="Link to this heading">¶</a></h3>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CONFIGURE_CPPFLAGS">
<span class="sig-name descname"><span class="pre">CONFIGURE_CPPFLAGS</span></span><a class="headerlink" href="#envvar-CONFIGURE_CPPFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>变量 <span class="target" id="index-76"></span><a class="reference internal" href="#envvar-CPPFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CPPFLAGS</span></code></a> 的值被传递给 <code class="docutils literal notranslate"><span class="pre">./configure</span></code> 脚本。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.6.</span></p>
</div>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CPPFLAGS">
<span class="sig-name descname"><span class="pre">CPPFLAGS</span></span><a class="headerlink" href="#envvar-CPPFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>(Objective) C/C++ 预处理器标志，例如，如果头文件位于非标准的目录 <em>include_dir</em> 中，请使用 <code class="samp docutils literal notranslate"><span class="pre">-I</span><em><span class="pre">include_dir</span></em></code> 。</p>
<p><span class="target" id="index-77"></span><a class="reference internal" href="#envvar-CPPFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CPPFLAGS</span></code></a> 和 <span class="target" id="index-78"></span><a class="reference internal" href="#envvar-LDFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LDFLAGS</span></code></a> 都需要包含 shell 的值以便能够使用环境变量中指定的目录构建扩展模块。</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-BASECPPFLAGS">
<span class="sig-name descname"><span class="pre">BASECPPFLAGS</span></span><a class="headerlink" href="#envvar-BASECPPFLAGS" title="Link to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 3.4.</span></p>
</div>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PY_CPPFLAGS">
<span class="sig-name descname"><span class="pre">PY_CPPFLAGS</span></span><a class="headerlink" href="#envvar-PY_CPPFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>为构建解释器对象文件增加了额外的预处理器标志。</p>
<p>默认为：  <code class="docutils literal notranslate"><span class="pre">$(BASECPPFLAGS)</span> <span class="pre">-I.</span> <span class="pre">-I$(srcdir)/Include</span> <span class="pre">$(CONFIGURE_CPPFLAGS)</span> <span class="pre">$(CPPFLAGS)</span></code> 。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.2.</span></p>
</div>
</dd></dl>

</section>
<section id="compiler-flags">
<h3><span class="section-number">3.5.2. </span>编译器标志<a class="headerlink" href="#compiler-flags" title="Link to this heading">¶</a></h3>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CC">
<span class="sig-name descname"><span class="pre">CC</span></span><a class="headerlink" href="#envvar-CC" title="Link to this definition">¶</a></dt>
<dd><p>C 编译器指令。</p>
<p>例如： <code class="docutils literal notranslate"><span class="pre">gcc</span> <span class="pre">-pthread</span></code> 。</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CXX">
<span class="sig-name descname"><span class="pre">CXX</span></span><a class="headerlink" href="#envvar-CXX" title="Link to this definition">¶</a></dt>
<dd><p>C++ 编译器指令。</p>
<p>例如： <code class="docutils literal notranslate"><span class="pre">g++</span> <span class="pre">-pthread</span></code> 。</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CFLAGS">
<span class="sig-name descname"><span class="pre">CFLAGS</span></span><a class="headerlink" href="#envvar-CFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>C 编译器标志。</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CFLAGS_NODIST">
<span class="sig-name descname"><span class="pre">CFLAGS_NODIST</span></span><a class="headerlink" href="#envvar-CFLAGS_NODIST" title="Link to this definition">¶</a></dt>
<dd><p><span class="target" id="index-79"></span><a class="reference internal" href="#envvar-CFLAGS_NODIST"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CFLAGS_NODIST</span></code></a> 用于构建解释器和 stdlib C 扩展。 一旦装好 Python 则当某个编译器旗标 <em>不应</em> 成为 <span class="target" id="index-80"></span><a class="reference internal" href="#envvar-CFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CFLAGS</span></code></a> 的一部分时将可使用它 (<a class="reference external" href="https://github.com/python/cpython/issues/65320">gh-65320</a>)。</p>
<p>特别地，<span class="target" id="index-81"></span><a class="reference internal" href="#envvar-CFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CFLAGS</span></code></a> 不应当包含:</p>
<ul class="simple">
<li><p>编译器旗标 <code class="docutils literal notranslate"><span class="pre">-I</span></code> (用于为包括文件设置搜索路径)。 <code class="docutils literal notranslate"><span class="pre">-I</span></code> 旗标将按从左到右的顺序处理，并且 <span class="target" id="index-82"></span><a class="reference internal" href="#envvar-CFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CFLAGS</span></code></a> 中的任何旗标都将优先于 user- 和 package- 层级所提供的 <code class="docutils literal notranslate"><span class="pre">-I</span></code> 旗标。</p></li>
<li><p>加固旗标如 <code class="docutils literal notranslate"><span class="pre">-Werror</span></code> 因为分发版无法控制由用户安装的包是否符合这样的高标准。</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.5.</span></p>
</div>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-COMPILEALL_OPTS">
<span class="sig-name descname"><span class="pre">COMPILEALL_OPTS</span></span><a class="headerlink" href="#envvar-COMPILEALL_OPTS" title="Link to this definition">¶</a></dt>
<dd><p>当在 <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> 中构建 PYC 文件时传给 <a class="reference internal" href="../library/compileall.html#module-compileall" title="compileall: Tools for byte-compiling all Python source files in a directory tree."><code class="xref py py-mod docutils literal notranslate"><span class="pre">compileall</span></code></a> 命令行的选项。 默认值: <code class="docutils literal notranslate"><span class="pre">-j0</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.12.</span></p>
</div>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-EXTRA_CFLAGS">
<span class="sig-name descname"><span class="pre">EXTRA_CFLAGS</span></span><a class="headerlink" href="#envvar-EXTRA_CFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>而外的 C 编译器指令。</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CONFIGURE_CFLAGS">
<span class="sig-name descname"><span class="pre">CONFIGURE_CFLAGS</span></span><a class="headerlink" href="#envvar-CONFIGURE_CFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>变量 <span class="target" id="index-83"></span><a class="reference internal" href="#envvar-CFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CFLAGS</span></code></a> 的值传递给 <code class="docutils literal notranslate"><span class="pre">./configure</span></code> 脚本。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.2.</span></p>
</div>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CONFIGURE_CFLAGS_NODIST">
<span class="sig-name descname"><span class="pre">CONFIGURE_CFLAGS_NODIST</span></span><a class="headerlink" href="#envvar-CONFIGURE_CFLAGS_NODIST" title="Link to this definition">¶</a></dt>
<dd><p>变量 <span class="target" id="index-84"></span><a class="reference internal" href="#envvar-CFLAGS_NODIST"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CFLAGS_NODIST</span></code></a> 的值传递给 <code class="docutils literal notranslate"><span class="pre">./configure</span></code> 脚本。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.5.</span></p>
</div>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-BASECFLAGS">
<span class="sig-name descname"><span class="pre">BASECFLAGS</span></span><a class="headerlink" href="#envvar-BASECFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>基础编译器标志。</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-OPT">
<span class="sig-name descname"><span class="pre">OPT</span></span><a class="headerlink" href="#envvar-OPT" title="Link to this definition">¶</a></dt>
<dd><p>优化标志。</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CFLAGS_ALIASING">
<span class="sig-name descname"><span class="pre">CFLAGS_ALIASING</span></span><a class="headerlink" href="#envvar-CFLAGS_ALIASING" title="Link to this definition">¶</a></dt>
<dd><p>严格或不严格的别名标志，用于编译 <code class="docutils literal notranslate"><span class="pre">Python/dtoa.c</span></code> 、</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.7.</span></p>
</div>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CCSHARED">
<span class="sig-name descname"><span class="pre">CCSHARED</span></span><a class="headerlink" href="#envvar-CCSHARED" title="Link to this definition">¶</a></dt>
<dd><p>用于构建共享库的编译器标志。</p>
<p>例如， <code class="docutils literal notranslate"><span class="pre">-fPIC</span></code> 在 Linux 和 BSD 上使用。</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CFLAGSFORSHARED">
<span class="sig-name descname"><span class="pre">CFLAGSFORSHARED</span></span><a class="headerlink" href="#envvar-CFLAGSFORSHARED" title="Link to this definition">¶</a></dt>
<dd><p>为构建解释器对象文件增加了额外的 C 标志。</p>
<p>，默认为： <code class="docutils literal notranslate"><span class="pre">$(CCSHARED)</span></code> ，当 <a class="reference internal" href="#cmdoption-enable-shared"><code class="xref std std-option docutils literal notranslate"><span class="pre">--enable-shared</span></code></a> 被使用时，则为空字符串</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PY_CFLAGS">
<span class="sig-name descname"><span class="pre">PY_CFLAGS</span></span><a class="headerlink" href="#envvar-PY_CFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>默认为： <code class="docutils literal notranslate"><span class="pre">$(BASECFLAGS)</span> <span class="pre">$(OPT)</span> <span class="pre">$(CONFIGURE_CFLAGS)</span> <span class="pre">$(CFLAGS)</span> <span class="pre">$(EXTRA_CFLAGS)</span></code> 。</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PY_CFLAGS_NODIST">
<span class="sig-name descname"><span class="pre">PY_CFLAGS_NODIST</span></span><a class="headerlink" href="#envvar-PY_CFLAGS_NODIST" title="Link to this definition">¶</a></dt>
<dd><p>默认为： <code class="docutils literal notranslate"><span class="pre">$(CONFIGURE_CFLAGS_NODIST)</span> <span class="pre">$(CFLAGS_NODIST)</span> <span class="pre">-I$(srcdir)/Include/internal</span></code> 。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.5.</span></p>
</div>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PY_STDMODULE_CFLAGS">
<span class="sig-name descname"><span class="pre">PY_STDMODULE_CFLAGS</span></span><a class="headerlink" href="#envvar-PY_STDMODULE_CFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>用于构建解释器对象文件的 C 标志。</p>
<p>默认为： <code class="docutils literal notranslate"><span class="pre">$(PY_CFLAGS)</span> <span class="pre">$(PY_CFLAGS_NODIST)</span> <span class="pre">$(PY_CPPFLAGS)</span> <span class="pre">$(CFLAGSFORSHARED)</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.7.</span></p>
</div>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PY_CORE_CFLAGS">
<span class="sig-name descname"><span class="pre">PY_CORE_CFLAGS</span></span><a class="headerlink" href="#envvar-PY_CORE_CFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>默认为 <code class="docutils literal notranslate"><span class="pre">$(PY_STDMODULE_CFLAGS)</span> <span class="pre">-DPy_BUILD_CORE</span></code> 。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.2.</span></p>
</div>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PY_BUILTIN_MODULE_CFLAGS">
<span class="sig-name descname"><span class="pre">PY_BUILTIN_MODULE_CFLAGS</span></span><a class="headerlink" href="#envvar-PY_BUILTIN_MODULE_CFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>编译器标志，将标准库的扩展模块作为内置模块来构建，如 <a class="reference internal" href="../library/posix.html#module-posix" title="posix: The most common POSIX system calls (normally used via module os). (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">posix</span></code></a> 模块</p>
<p>默认为： <code class="docutils literal notranslate"><span class="pre">$(PY_STDMODULE_CFLAGS)</span> <span class="pre">-DPy_BUILD_CORE_BUILTIN</span></code> 。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.8.</span></p>
</div>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PURIFY">
<span class="sig-name descname"><span class="pre">PURIFY</span></span><a class="headerlink" href="#envvar-PURIFY" title="Link to this definition">¶</a></dt>
<dd><p>Purify 命令。 Purify 是一个内存调试程序。</p>
<p>默认为：空字符串（不使用）。</p>
</dd></dl>

</section>
<section id="linker-flags">
<h3><span class="section-number">3.5.3. </span>链接器标志位<a class="headerlink" href="#linker-flags" title="Link to this heading">¶</a></h3>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-LINKCC">
<span class="sig-name descname"><span class="pre">LINKCC</span></span><a class="headerlink" href="#envvar-LINKCC" title="Link to this definition">¶</a></dt>
<dd><p>用于构建如 <code class="docutils literal notranslate"><span class="pre">python</span></code> 和 <code class="docutils literal notranslate"><span class="pre">_testembed</span></code> 的程序的链接器命令。</p>
<p>默认值: <code class="docutils literal notranslate"><span class="pre">$(PURIFY)</span> <span class="pre">$(CC)</span></code>。</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CONFIGURE_LDFLAGS">
<span class="sig-name descname"><span class="pre">CONFIGURE_LDFLAGS</span></span><a class="headerlink" href="#envvar-CONFIGURE_LDFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>变量 <span class="target" id="index-85"></span><a class="reference internal" href="#envvar-LDFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LDFLAGS</span></code></a> 的值被传递给 <code class="docutils literal notranslate"><span class="pre">./configure</span></code> 脚本。</p>
<p>避免指定 <span class="target" id="index-86"></span><a class="reference internal" href="#envvar-CFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CFLAGS</span></code></a> ， <span class="target" id="index-87"></span><a class="reference internal" href="#envvar-LDFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LDFLAGS</span></code></a> 等，这样用户就可以在命令行上使用它们来追加这些值，而不用触碰到预设的值。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.2.</span></p>
</div>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-LDFLAGS_NODIST">
<span class="sig-name descname"><span class="pre">LDFLAGS_NODIST</span></span><a class="headerlink" href="#envvar-LDFLAGS_NODIST" title="Link to this definition">¶</a></dt>
<dd><p><span class="target" id="index-88"></span><a class="reference internal" href="#envvar-LDFLAGS_NODIST"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LDFLAGS_NODIST</span></code></a> 的使用方式与 <span class="target" id="index-89"></span><a class="reference internal" href="#envvar-CFLAGS_NODIST"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CFLAGS_NODIST</span></code></a> 相同。 一旦装好 Python 则当某个链接器旗标 <em>不应</em> 成为 <span class="target" id="index-90"></span><a class="reference internal" href="#envvar-LDFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LDFLAGS</span></code></a> 的一部分时将可使用它 (<a class="reference external" href="https://github.com/python/cpython/issues/65320">gh-65320</a>)。</p>
<p>特别地，<span class="target" id="index-91"></span><a class="reference internal" href="#envvar-LDFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LDFLAGS</span></code></a> 不应当包含:</p>
<ul class="simple">
<li><p>编译器旗标 <code class="docutils literal notranslate"><span class="pre">-L</span></code> (用于为库设置搜索路径)。 <code class="docutils literal notranslate"><span class="pre">-L</span></code> 旗标将按从左到右的顺序处理，并且 <span class="target" id="index-92"></span><a class="reference internal" href="#envvar-LDFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LDFLAGS</span></code></a> 中的任何旗标都将优先于 user- 和 package 层级所提供的 <code class="docutils literal notranslate"><span class="pre">-L</span></code> 旗标。</p></li>
</ul>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CONFIGURE_LDFLAGS_NODIST">
<span class="sig-name descname"><span class="pre">CONFIGURE_LDFLAGS_NODIST</span></span><a class="headerlink" href="#envvar-CONFIGURE_LDFLAGS_NODIST" title="Link to this definition">¶</a></dt>
<dd><p>变量 <span class="target" id="index-93"></span><a class="reference internal" href="#envvar-LDFLAGS_NODIST"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LDFLAGS_NODIST</span></code></a> 的值传递给 <code class="docutils literal notranslate"><span class="pre">./configure</span></code> 脚本。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.8.</span></p>
</div>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-LDFLAGS">
<span class="sig-name descname"><span class="pre">LDFLAGS</span></span><a class="headerlink" href="#envvar-LDFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>链接器标志，例如，如果库位于非标准的目录 <em>lib_dir</em> 中，请使用 <code class="samp docutils literal notranslate"><span class="pre">-L</span><em><span class="pre">lib_dir</span></em></code> 。</p>
<p><span class="target" id="index-94"></span><a class="reference internal" href="#envvar-CPPFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CPPFLAGS</span></code></a> 和 <span class="target" id="index-95"></span><a class="reference internal" href="#envvar-LDFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LDFLAGS</span></code></a> 都需要包含 shell 的值以便能够使用环境变量中指定的目录构建扩展模块。</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-LIBS">
<span class="sig-name descname"><span class="pre">LIBS</span></span><a class="headerlink" href="#envvar-LIBS" title="Link to this definition">¶</a></dt>
<dd><p>链接器标志，在链接 Python 可执行文件时将库传递给链接器。</p>
<p>例如： <code class="docutils literal notranslate"><span class="pre">-lrt</span></code> 。</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-LDSHARED">
<span class="sig-name descname"><span class="pre">LDSHARED</span></span><a class="headerlink" href="#envvar-LDSHARED" title="Link to this definition">¶</a></dt>
<dd><p>构建一个共享库的命令。</p>
<p>默认为： <code class="docutils literal notranslate"><span class="pre">&#64;LDSHARED&#64;</span> <span class="pre">$(PY_LDFLAGS)</span></code> 。</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-BLDSHARED">
<span class="sig-name descname"><span class="pre">BLDSHARED</span></span><a class="headerlink" href="#envvar-BLDSHARED" title="Link to this definition">¶</a></dt>
<dd><p>构建共享库 <code class="docutils literal notranslate"><span class="pre">libpython</span></code> 的命令。</p>
<p>默认为： <code class="docutils literal notranslate"><span class="pre">&#64;BLDSHARED&#64;</span> <span class="pre">$(PY_CORE_LDFLAGS)</span></code> 。</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PY_LDFLAGS">
<span class="sig-name descname"><span class="pre">PY_LDFLAGS</span></span><a class="headerlink" href="#envvar-PY_LDFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>默认为： <code class="docutils literal notranslate"><span class="pre">$(CONFIGURE_LDFLAGS)</span> <span class="pre">$(LDFLAGS)</span></code> 。</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PY_LDFLAGS_NODIST">
<span class="sig-name descname"><span class="pre">PY_LDFLAGS_NODIST</span></span><a class="headerlink" href="#envvar-PY_LDFLAGS_NODIST" title="Link to this definition">¶</a></dt>
<dd><p>默认为： <code class="docutils literal notranslate"><span class="pre">$(CONFIGURE_LDFLAGS_NODIST)</span> <span class="pre">$(LDFLAGS_NODIST)</span></code> 。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.8.</span></p>
</div>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PY_CORE_LDFLAGS">
<span class="sig-name descname"><span class="pre">PY_CORE_LDFLAGS</span></span><a class="headerlink" href="#envvar-PY_CORE_LDFLAGS" title="Link to this definition">¶</a></dt>
<dd><p>用于构建解释器对象文件的链接器标志。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.8.</span></p>
</div>
</dd></dl>

<p class="rubric">备注</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id5" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">1</a><span class="fn-bracket">]</span></span>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clean</span> <span class="pre">-fdx</span></code> 是“清理”你的签出内容的更激进方式。 它将移除所有对 Git 来说未知的文件。 当使用 <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code> 查找程序错误时，<a class="reference external" href="https://github.com/python/cpython/issues/114505#issuecomment-1907021718">推荐在多次探查之间</a> 执行此命令来确保完整的全新构建。 <strong>请谨慎使用</strong>，因为它将删除所有未签入 Git 的文件，包括你最新的、尚未提交的工作。</p>
</aside>
</aside>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">目录</a></h3>
    <ul>
<li><a class="reference internal" href="#">3. 配置 Python</a><ul>
<li><a class="reference internal" href="#build-requirements">3.1. 构建要求</a></li>
<li><a class="reference internal" href="#generated-files">3.2. 已生成的文件</a><ul>
<li><a class="reference internal" href="#configure-script">3.2.1. 配置脚本</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configure-options">3.3. 配置选项</a><ul>
<li><a class="reference internal" href="#general-options">3.3.1. 通用选项</a></li>
<li><a class="reference internal" href="#c-compiler-options">3.3.2. C 编译器选项</a></li>
<li><a class="reference internal" href="#linker-options">3.3.3. 链接器选项</a></li>
<li><a class="reference internal" href="#options-for-third-party-dependencies">3.3.4. 用于第三方依赖的选项</a></li>
<li><a class="reference internal" href="#webassembly-options">3.3.5. WebAssembly 选项。</a></li>
<li><a class="reference internal" href="#install-options">3.3.6. 安装时的选项</a></li>
<li><a class="reference internal" href="#performance-options">3.3.7. 性能选项</a></li>
<li><a class="reference internal" href="#python-debug-build">3.3.8. Python 调试级编译</a></li>
<li><a class="reference internal" href="#debug-options">3.3.9. 调试选项</a></li>
<li><a class="reference internal" href="#id2">3.3.10. 链接器选项</a></li>
<li><a class="reference internal" href="#libraries-options">3.3.11. 库选项</a></li>
<li><a class="reference internal" href="#security-options">3.3.12. 安全性选项</a></li>
<li><a class="reference internal" href="#macos-options">3.3.13. macOS 选项</a></li>
<li><a class="reference internal" href="#ios-options">3.3.14. iOS 选项</a></li>
<li><a class="reference internal" href="#cross-compiling-options">3.3.15. 交叉编译选项</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-build-system">3.4. Python 构建系统</a><ul>
<li><a class="reference internal" href="#main-files-of-the-build-system">3.4.1. 构建系统的主要文件</a></li>
<li><a class="reference internal" href="#main-build-steps">3.4.2. 主要构建步骤</a></li>
<li><a class="reference internal" href="#main-makefile-targets">3.4.3. 主要 Makefile 目标</a><ul>
<li><a class="reference internal" href="#make">3.4.3.1. make</a></li>
<li><a class="reference internal" href="#make-platform">3.4.3.2. make platform</a></li>
<li><a class="reference internal" href="#make-profile-opt">3.4.3.3. make profile-opt</a></li>
<li><a class="reference internal" href="#make-clean">3.4.3.4. make clean</a></li>
<li><a class="reference internal" href="#make-distclean">3.4.3.5. make distclean</a></li>
<li><a class="reference internal" href="#make-install">3.4.3.6. make install</a></li>
<li><a class="reference internal" href="#make-test">3.4.3.7. make test</a></li>
<li><a class="reference internal" href="#make-ci">3.4.3.8. make ci</a></li>
<li><a class="reference internal" href="#make-buildbottest">3.4.3.9. make buildbottest</a></li>
<li><a class="reference internal" href="#make-regen-all">3.4.3.10. make regen-all</a></li>
</ul>
</li>
<li><a class="reference internal" href="#c-extensions">3.4.4. C 扩展</a></li>
</ul>
</li>
<li><a class="reference internal" href="#compiler-and-linker-flags">3.5. 编译器和链接器的标志</a><ul>
<li><a class="reference internal" href="#preprocessor-flags">3.5.1. 预处理器的标志</a></li>
<li><a class="reference internal" href="#compiler-flags">3.5.2. 编译器标志</a></li>
<li><a class="reference internal" href="#linker-flags">3.5.3. 链接器标志位</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>上一主题</h4>
    <p class="topless"><a href="unix.html"
                          title="上一章"><span class="section-number">2. </span>在类Unix环境下使用Python</a></p>
  </div>
  <div>
    <h4>下一主题</h4>
    <p class="topless"><a href="windows.html"
                          title="下一章"><span class="section-number">4. </span>在Windows上使用 Python</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>当前页</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">报告 Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/using/configure.rst"
            rel="nofollow">显示源码
        </a>
      </li>
    </ul>
  </div>
        </div>
<div id="sidebarbutton" title="折叠边栏">
<span>«</span>
</div>

      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="Related">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="windows.html" title="4. 在Windows上使用 Python"
             >下一页</a> |</li>
        <li class="right" >
          <a href="unix.html" title="2. 在类Unix环境下使用Python"
             >上一页</a> |</li>

          <li><img src="../_static/py.svg" alt="Python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.14.0a4 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python安装和使用</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3. </span>配置 Python</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="快速搜索" aria-label="快速搜索" type="search" name="q" id="search-box" />
          <input type="submit" value="提交" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; 
      <a href="../copyright.html">
    
    版权所有
    
      </a>
     2001 Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    
      See <a href="/license.html">History and License</a> for more information.<br />
    
    
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />
      最后更新于 2月 03, 2025 (05:36 UTC).
    
      <a href="/bugs.html">Found a bug</a>?
    
    <br />

    由 <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3创建。
    </div>

  </body>
</html>